if (self.CavalryLogger) { CavalryLogger.start_js(["C\/cTT"]); }

__d("CommerceCommonNUXAPI",["AsyncRequest","XCommerceSelfServeMerchantNUXSeenController"],(function(a,b,c,d,e,f){"use strict";a={update:function(a){a=b("XCommerceSelfServeMerchantNUXSeenController").getURIBuilder().setInt("page_id",a.pageID).setEnum("nux_type",a.nuxType).setEnum("event",a.event).getURI();new(b("AsyncRequest"))(a).send()}};e.exports=a}),null);
__d("PagesMarkAsPaidCurrencyUtil",["ix","fbglyph"],(function(a,b,c,d,e,f,g){"use strict";var h={BRL:g("116319"),GBP:g("116325"),INR:g("116333"),MYR:g("116337"),PHP:g("116345"),THB:g("307029"),VND:g("116369"),USD:g("116361")},i=["BRL","EGP","GBP","INR","MXN","MYR","PHP","THB","TWD","USD","VND"],j="USD";a={getIconSrc:function(a){return!a?h[j]:h[a]||h[j]},getCurrencyList:function(){return i}};e.exports=a}),null);
__d("CommerceProductItemSearch",["ActorURI","AsyncRequest","XPagesManagerProductSearchController","bind","debounce"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=300,h=30;function a(a,c,d,e){this.searchOrMore=b("debounce")(this.$8,d||g,this),this.$2=c||[],this.$3=new Set(),this.$5=[],this.$7=e||h,this.$1=b("ActorURI").create(b("XPagesManagerProductSearchController").getURIBuilder().getURI(),a)}a.prototype.$8=function(a,c){this.$6&&this.$6.abort();var d=a!==this.$4;d&&(this.$3.clear(),this.$5=[],this.$4=a);var e=this.$2.concat(Array.from(this.$3));this.$6=new(b("AsyncRequest"))().setData({query:a.trim(),offset:0,limit:this.$7,filter_product_group_ids:e}).setHandler(b("bind")(this,this.$9,c,d)).setURI(this.$1);this.$6.send()};a.prototype.$9=function(a,b,c){c=c.payload.products;c.map(function(a){this.$3.add(a.product_group_id)}.bind(this));this.$5=this.$5.concat(c);this.$6=null;a(this.$5,c.length!==0||b)};e.exports=a}),null);
__d("PageCommOwnerFilter",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NONE:"NONE",SOMEONE:"SOMEONE"})}),null);
__d("PagesMessengerThreadUtils",["invariant","MessagingTag","PageCommOwnerFilter","PageMessageEnumTag"],(function(a,b,c,d,e,f,g){__p&&__p();var h="CUSTOM_TAG_",i="WITH_FLAG_",j="OWNER_",k={isFlagThread:function(a){return a&&a.page_thread_info&&"flagged"in a.page_thread_info?a.page_thread_info.flagged:!1},isPageSpecficEnumFilter:function(a){return a===b("PageMessageEnumTag").FLAG||a===b("PageMessageEnumTag").IMPORTANT?!0:!1},isCustomTagsFilter:function(a){return a.startsWith(h)},isCustomTagsWithFlagFilter:function(a){return a.startsWith(h+i)},isOwnerFilter:function(a){return a.startsWith(j)},getCustomTagsFilter:function(a,b){return h+(b?i:"")+JSON.stringify(a.sort())},parseCustomTagsFilter:function(a){this.isCustomTagsFilter(a)||g(0,2826);var b=this.isCustomTagsWithFlagFilter(a);return JSON.parse(a.substring(h.length+(b?i.length:0)))},parseOwnerFilter:function(a){this.isOwnerFilter(a)||g(0,2827);a=a.substring(j.length);return a===b("PageCommOwnerFilter").NONE?"":a},getBatchActionMenuParam:function(a){var c=!1,d=!1,e=!1,f=!1,g=!1,h=!1,i=!1,j=!1,l=!1,m=!1;a.folder===b("MessagingTag").INBOX&&!a.is_archived?(c=!0,f=!0,k.isFlagThread(a)?i=!0:h=!0,a&&a.unread_count===0?l=!0:j=!0):a.folder===b("MessagingTag").OTHER?g=!0:a.is_archived?(d=!0,e=!0):a.folder===b("MessagingTag").PAGE_BACKGROUND&&(m=!0);a&&a.unread_count===0?l=!0:j=!0;return{showArchive:c,showDelete:d,showUnarchive:e,showSpam:f,showUnspam:g,showFlag:h,showUnflag:i,showMarkRead:j,showMarkUnread:l,showMoveToInbox:m,showHideContextCard:!1,showShowContextCard:!1}}};e.exports=k}),null);
__d("FBPaymentsCartFlowContainerBase.react",["FBPaymentsCartItem","FBPaymentsPriceListHelper","immutable","React","abstractMethod","emptyFunction","keyMirror","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;var h=b("keyMirror")({CART_SUMMARY:null,CONFIGURE_ITEM_OPTIONS:null});d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(a){__p&&__p();g.constructor.call(this,a),this.$1=function(a){this.setState({config:a})}.bind(this),this.$2=function(a){this.setState({errorMessage:a.message})}.bind(this),this.$5=function(){this.props.onClose()}.bind(this),this.$6=function(a){this.setState({configuringCartItem:a,configuringCartItemKey:null,step:h.CONFIGURE_ITEM_OPTIONS})}.bind(this),this.$7=function(a){var c=null;a!=undefined&&a.length>0&&(c=new(b("FBPaymentsCartItem"))({title:a,quantity:1}));this.setState({configuringCartItem:c,configuringCartItemKey:null,step:h.CONFIGURE_ITEM_OPTIONS})}.bind(this),this.$8=function(a){__p&&__p();var b=this.state.configuringCartItemKey,c=this.state.itemsInCart;if(b===null||b===undefined){var d;d=((d=this.state)!=null?(d=d.config)!=null?(d=d.extraData)!=null?d.short_flow:d:d:d)==="1";var e=a.id?c.findIndex(function(b){return b.id===a.id}):-1;if(d&&e>=0){d=c.get(e);d.quantity+=a.quantity}else b=this.$4(),c=c.set(b,a)}else c=c.set(b,a);this.setState({configuringCartItem:null,configuringCartItemKey:null,itemsInCart:c,step:h.CART_SUMMARY})}.bind(this),this.$9=function(a){var b=this.state.itemsInCart.get(a);this.setState({configuringCartItem:b,configuringCartItemKey:a,step:h.CONFIGURE_ITEM_OPTIONS})}.bind(this),this.$10=function(a){a=this.state.itemsInCart["delete"](a);this.setState({itemsInCart:a})}.bind(this),this.$11=function(){this.props.onContinue&&this.props.onContinue(this.state.itemsInCart)}.bind(this),this.state={config:null,configuringCartItem:null,configuringCartItemKey:null,errorMessage:null,itemsInCart:b("immutable").List(),step:h.CART_SUMMARY}}a.prototype.UNSAFE_componentWillMount=function(){b("promiseDone")(this.props.configLoader(),this.$1,this.$2)};a.prototype.$3=function(){return this.state.config&&this.state.config.itemCurrency||"USD"};a.prototype.$4=function(){return this.state.itemsInCart.size};a.prototype.__isCartFull=function(){var a=this.state.config&&this.state.config.maxCartItems;return a===null||a===undefined||a<0?!1:this.state.itemsInCart.size>=a};a.prototype.__isCartEmpty=function(){return this.state.itemsInCart.size===0};a.prototype.$12=function(){var a=this.state.itemsInCart,c={currency:this.$3(),amount:"0"};a.forEach(function(a){c=b("FBPaymentsPriceListHelper").addPrices(c,a.getPrice())});return c};a.prototype.render=function(){__p&&__p();var a,c,d=this.state.config,e=0;if(d)if(this.state.step===h.CART_SUMMARY){var f,g=this.__getProductSearchContainer();f=((f=d)!=null?(f=f.extraData)!=null?f.short_flow:f:f)==="1";var i=f?this.$8:this.$6,j=f&&this.__isCartEmpty();f&&(e=400);g=this.__isCartFull()?undefined:b("React").createElement(g,{canCreateCustomItem:!!d.customItemsConfig,multiSelect:f,onCartItemSelected:i,onCreateCustomItem:this.$7,sellerID:this.props.sellerID,showListOnLaunch:j});f=this.__getCartSummaryScreen();c=b("React").createElement(f,{buyerID:this.props.buyerID,cartItems:this.state.itemsInCart,continueButtonLabel:this.props.continueButtonLabel,isBonusTrackerEnabled:this.props.isBonusTrackerEnabled,isContinueButtonDisabled:this.state.itemsInCart.size===0,onContinueButtonClicked:this.$11,onEditCartItem:this.$9,onRemoveCartItem:this.$10,productSearchContainer:g,sellerID:this.props.sellerID,subtotal:this.$12(),title:d.title})}else if(this.state.step===h.CONFIGURE_ITEM_OPTIONS){var k;i=this.__getCartProductConfigurationContainer();j=!this.state.configuringCartItem;g=((f=d)!=null?(f=f.catalogItemsConfig)!=null?f.customizePrice:f:f)&&!j;f=(f=d)!=null?(f=f.customItemsConfig)!=null?f.itemFields:f:f;k=(k=d)!=null?(k=k.customItemsConfig)!=null?k.quantityLimit:k:k;a=b("React").createElement(i,{cartItem:this.state.configuringCartItem,cartItemKey:this.state.configuringCartItemKey,customItemFields:f,customItemMaxQuantity:k,isCustomItem:j,isPriceEditable:g,onAddItemToCart:this.$8})}i={cartSummaryScreen:c,errorMessage:this.state.errorMessage,isLoading:!d,onDialogClose:this.$5,productConfigurationContainer:a,shown:this.props.shown};f=this.__getCartFlowView();if(e>0)return b("React").createElement(f,babelHelpers["extends"]({},i,{dialogWidth:e}));else return b("React").createElement(f,i)};a.prototype.__getCartFlowView=function(){return b("abstractMethod")("FBPaymentsCartFlowContainerBase","__getCartFlowView")};a.prototype.__getCartSummaryScreen=function(){return b("abstractMethod")("FBPaymentsCartFlowContainerBase","__getCartSummaryScreen")};a.prototype.__getCartProductConfigurationContainer=function(){return b("abstractMethod")("FBPaymentsCartFlowContainerBase","__getCartProductConfigurationContainer")};a.prototype.__getProductSearchContainer=function(){return b("abstractMethod")("FBPaymentsCartFlowContainerBase","__getProductSearchContainer")};a.propTypes={buyerID:c.string,configLoader:c.func.isRequired,continueButtonLabel:c.node,isBonusTrackerEnabled:c.bool,onClose:c.func.isRequired,onContinue:c.func,sellerID:c.string.isRequired,shown:c.bool.isRequired};a.defaultProps={onClose:b("emptyFunction"),shown:!0};e.exports=a}),null);
__d("FBPaymentsCartFlowViewBase.react",["React","abstractMethod"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;d=325;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.__shouldShowError=function(){return!!this.props.errorMessage};a.prototype.__shouldShowLoading=function(){return!!this.props.isLoading};a.prototype.__shouldShowProductConfiguration=function(){return!!this.props.productConfigurationContainer};a.prototype.__renderBodyContent=function(){if(this.__shouldShowError())return this.__renderError();else if(this.__shouldShowLoading())return this.__renderLoading();else if(this.__shouldShowProductConfiguration())return this.props.productConfigurationContainer;else return this.props.cartSummaryScreen};a.prototype.__renderLoading=function(){return b("abstractMethod")("FBPaymentsCartFlowViewBase","__renderLoading")};a.prototype.__renderError=function(){return b("abstractMethod")("FBPaymentsCartFlowViewBase","__renderError")};function a(){g.apply(this,arguments)}a.propTypes={cartSummaryScreen:c.element,dialogWidth:c.number.isRequired,errorMessage:c.node,isLoading:c.bool,onDialogClose:c.func.isRequired,productConfigurationContainer:c.element,shown:c.bool.isRequired};a.defaultProps={dialogWidth:d};e.exports=a}),null);
__d("FBPaymentsCartFlowView.react",["cx","FBPaymentsCartFlowViewBase.react","FBPaymentsLoadingView.react","LayerHideOnBlur","LayerHideOnEscape","React","XUIDialog.react","XUINotice.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("FBPaymentsCartFlowViewBase.react"));h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$FBPaymentsCartFlowView1=function(a){a||this.props.onDialogClose()}.bind(this),b}a.prototype.__renderLoading=function(){return b("React").createElement(b("FBPaymentsLoadingView.react"),{overlay:!0,isVisible:!0})};a.prototype.__renderError=function(){return b("React").createElement(b("XUINotice.react"),{size:"medium",use:"warn"},this.props.errorMessage)};a.prototype.render=function(){var a="_xfh"+(this.__shouldShowError()?" _2ph_":"")+(this.props.shown?"":" hidden_elem"),c={LayerHideOnEscape:b("LayerHideOnEscape")},d=this.__shouldShowError();d&&(c=babelHelpers["extends"]({},c,{LayerHideOnBlur:b("LayerHideOnBlur")}));return b("React").createElement(b("XUIDialog.react"),{behaviors:c,layerHideOnBlur:!1,onToggle:this.$FBPaymentsCartFlowView1,shown:!0,width:this.props.dialogWidth},b("React").createElement("div",{className:a},this.__renderBodyContent()))};e.exports=a}),null);
__d("FBPaymentsCartProductConfigurationContainerBase.react",["invariant","FBPaymentsCartItem","React","abstractMethod"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(a){__p&&__p();h.constructor.call(this,a);this.$2=function(){__p&&__p();var a=babelHelpers["extends"]({},this.props.cartItem,{quantity:this.state.quantity});if(this.props.isCustomItem){a.quantityLimit=this.props.customItemMaxQuantity;var c=this.state.customItemFormData;c=Object.entries(c);for(var d=0;d<c.length;d++){var e=c[d],f=e[0];e=e[1];var g=this.props.customItemFields.get(f);g.type==="currency"?a.unitPrice={currency:g.currency,amount:e}:a[f]=e}}else this.state.priceAmount&&(a.unitPrice={currency:this.props.cartItem.unitPrice.currency,amount:this.state.priceAmount});g=new(b("FBPaymentsCartItem"))(a);this.props.onAddItemToCart(g)}.bind(this);this.$3=function(a,b){if(!this.props.isCustomItem)return;this.setState({customItemFormData:a,isAddButtonEnabled:b})}.bind(this);this.$4=function(a,b){if(!this.props.isPriceEditable)return;this.setState({priceAmount:a.price,isAddButtonEnabled:b})}.bind(this);this.$5=function(a){this.setState({quantity:a})}.bind(this);this.assertValidProps(a);a=a.cartItem?a.cartItem.quantity:1;this.state={customItemFormData:{},isAddButtonEnabled:!0,priceAmount:"",quantity:a}}a.prototype.assertValidProps=function(a){a.isCustomItem&&a.isPriceEditable&&g(0,3005),a.isCustomItem?!a.customItemFields&&g(0,3006):a.cartItem||g(0,3007)};a.prototype.$1=function(){var a=this.props.cartItem,b;this.props.isCustomItem?b=this.props.customItemMaxQuantity:a&&(b=a.quantityLimit);return b};a.prototype.__getView=function(){return b("abstractMethod")("FBPaymentsCartProductConfigurationContainerBase","__getView")};a.prototype.render=function(){var a=this.__getView();return b("React").createElement(a,babelHelpers["extends"]({},this.state,{cartItem:this.props.cartItem,customItemFields:this.props.customItemFields,isCustomItem:this.props.isCustomItem,isEditExistingItem:this.props.cartItemKey!==null,isPriceEditable:this.props.isPriceEditable,maxQuantity:this.$1(),onAddItemToCart:this.$2,onCustomItemFormChange:this.$3,onPriceChange:this.$4,onQuantityChange:this.$5}))};a.propTypes={cartItemKey:c.number,cartItem:c.object,customItemFields:c.object,customItemMaxQuantity:c.number,isCustomItem:c.bool.isRequired,isPriceEditable:c.bool.isRequired,onAddItemToCart:c.func.isRequired};e.exports=a}),null);
__d("FBPaymentsCartBodyBase.react",["React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FBPaymentsCartBody.react",["cx","FBPaymentsCartBodyBase.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h;h=babelHelpers.inherits(a,b("FBPaymentsCartBodyBase.react"));h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_222z"},this.props.children)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("FBPaymentsCartFooterBase.react",["React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FBPaymentsCartFooter.react",["cx","FBPaymentsCartFooterBase.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h;h=babelHelpers.inherits(a,b("FBPaymentsCartFooterBase.react"));h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_222q"},this.props.children)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("FBPaymentsCartHeaderBase.react",["React"],(function(a,b,c,d,e,f){"use strict";var g;c=b("React").PropTypes;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;function a(){g.apply(this,arguments)}a.propTypes={title:c.node.isRequired};e.exports=a}),null);
__d("FBPaymentsCartHeader.react",["cx","FBPaymentsCartHeaderBase.react","React","XUIDialogTitle.react","XUIGrayText.react"],(function(a,b,c,d,e,f,g){"use strict";var h;h=babelHelpers.inherits(a,b("FBPaymentsCartHeaderBase.react"));h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_1iw9"},b("React").createElement(b("XUIDialogTitle.react"),{className:"_222x"},b("React").createElement(b("XUIGrayText.react"),{className:"_222y",shade:"dark",size:"meta1"},this.props.title)),this.props.children)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("FBPaymentsCartProductConfigurationViewBase.react",["fbt","PECurrency","PECurrency.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("PECurrency").DEFAULT_AMOUNT_OFFSET;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.getFormattedItemPrice=function(a){return b("React").createElement(b("PECurrency.react"),{code:a.currency,value:i*Number(a.amount)})};a.prototype.getHeaderTitle=function(){return this.props.isCustomItem?g._("Add New Product"):g._("Edit Product")};a.prototype.getAddButtonLabel=function(){if(this.props.isEditExistingItem)return g._("Update");else return g._("Add")};a.prototype.getQuantityLabel=function(){return g._("Quantity")};a.prototype.shouldRenderPriceField=function(){return!this.props.isCustomItem&&this.props.isPriceEditable};a.prototype.shouldRenderCustomItemForm=function(){return this.props.isCustomItem&&!!this.props.customItemFields};function a(){h.apply(this,arguments)}a.propTypes={cartItem:c.object,customItemFields:c.object,isAddButtonEnabled:c.bool.isRequired,isCustomItem:c.bool,isEditExistingItem:c.bool,isPriceEditable:c.bool.isRequired,maxQuantity:c.number,onAddItemToCart:c.func.isRequired,onCustomItemFormChange:c.func.isRequired,onPriceChange:c.func,onQuantityChange:c.func.isRequired,quantity:c.number.isRequired};a.defaultProps={isAddButtonEnabled:!0,isEditExistingItem:!1,isPriceEditable:!1};e.exports=a}),null);
__d("FBPaymentsCartProductConfigurationView.react",["cx","fbt","AdsIncrementalNumberInput.react","FBPaymentsCartBody.react","FBPaymentsCartFooter.react","FBPaymentsCartHeader.react","FBPaymentsCartProductConfigurationViewBase.react","FBPaymentsCustomForm.react","FBPaymentsForm.react","FBPaymentsItemSummaryView.react","FBPaymentsPriceFormField.react","React","XUIButton.react","XUIGrayText.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=1,k=48;i=babelHelpers.inherits(a,b("FBPaymentsCartProductConfigurationViewBase.react"));i&&i.prototype;a.prototype.renderProductHeader=function(){var a=this.props.cartItem;if(this.props.isCustomItem||!a)return null;var c;this.props.isPriceEditable||(c=b("React").createElement("div",{className:"_1i26 _3-9b"},b("React").createElement(b("XUIGrayText.react"),{shade:"dark",size:"meta1"},this.getFormattedItemPrice(a.unitPrice))));var d=b("React").createElement(b("XUIGrayText.react"),{className:"_222y",display:"block",shade:"dark",size:"meta1"},a.title),e=b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"dark",size:"meta1"},a.subtitle);return b("React").createElement("div",{className:"_36ny"},b("React").createElement(b("FBPaymentsItemSummaryView.react"),{imageSrc:a.imageURL||"",imageHeight:k,imageWidth:k,rightContent:c},d,e))};a.prototype.renderCustomItemForm=function(){if(!this.shouldRenderCustomItemForm()||!this.props.customItemFields)return null;var a=h._("Please enter a title for the item.");return b("React").createElement(b("FBPaymentsCustomForm.react"),{fields:Array.from(this.props.customItemFields.values()),onChange:this.props.onCustomItemFormChange,customNonEmptyErrorMessage:a})};a.prototype.renderPriceField=function(){var a;if(!this.shouldRenderPriceField())return null;a=(a=this.props.cartItem)!=null?(a=a.unitPrice)!=null?a.amount:a:a;return b("React").createElement(b("FBPaymentsForm.react"),{onChange:this.props.onPriceChange},b("React").createElement(b("FBPaymentsPriceFormField.react"),{className:"_3-96",name:"price",value:a}))};a.prototype.renderQuantitySelector=function(){var a=b("React").createElement(b("XUIGrayText.react"),{className:"_3-94 _4px8",display:"block",shade:"dark",size:"meta1"},this.getQuantityLabel());return b("React").createElement("div",null,a,b("React").createElement(b("AdsIncrementalNumberInput.react"),{arrowStyle:"dark",max:this.props.maxQuantity||undefined,min:j,onChange:this.props.onQuantityChange,showDisabled:!0,value:this.props.quantity}))};a.prototype.renderProductConfigurations=function(){return b("React").createElement("div",null,this.renderPriceField(),this.renderCustomItemForm(),this.renderQuantitySelector())};a.prototype.render=function(){return b("React").createElement("div",null,b("React").createElement(b("FBPaymentsCartHeader.react"),{title:this.getHeaderTitle()}),b("React").createElement(b("FBPaymentsCartBody.react"),null,this.renderProductHeader(),b("React").createElement("div",{className:"_2ph_"},this.renderProductConfigurations())),b("React").createElement(b("FBPaymentsCartFooter.react"),null,b("React").createElement(b("XUIButton.react"),{className:"_222r",disabled:!this.props.isAddButtonEnabled,label:this.getAddButtonLabel(),size:"large",onClick:this.props.onAddItemToCart,use:"confirm"})))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("FBPaymentsCartProductConfigurationContainer.react",["FBPaymentsCartProductConfigurationContainerBase.react","FBPaymentsCartProductConfigurationView.react"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("FBPaymentsCartProductConfigurationContainerBase.react"));g&&g.prototype;a.prototype.__getView=function(){return b("FBPaymentsCartProductConfigurationView.react")};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FBPaymentsCartProductSearchContainerBase.react",["React","abstractMethod"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.__getView=function(){return b("abstractMethod")("FBPaymentsCartProductSearchContainerBase","__getView")};a.prototype.render=function(){var a=this.__getView();return b("React").createElement(a,this.props)};function a(){g.apply(this,arguments)}a.propTypes={canCreateCustomItem:c.bool.isRequired,multiSelect:c.bool,onCartItemSelected:c.func.isRequired,onCreateCustomItem:c.func,sellerID:c.string.isRequired,showListOnLaunch:c.bool};e.exports=a}),null);
__d("CommerceAddProductScrollRow.react",["cx","fbt","React","XUIText.react","curry"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=this.props.queryString&&this.props.queryString.length>0?this.props.queryString:"",c=a.length>0?h._("Add Product {productName}",[h._param("productName",'"'+a+'"')]):h._("Add Product");return b("React").createElement("div",{className:"_2jjq",onClick:b("curry")(this.props.onClick,a),role:"presentation"},b("React").createElement("table",null,b("React").createElement("tbody",null,b("React").createElement("tr",null,b("React").createElement("td",null,b("React").createElement("div",{className:"_buh"})),b("React").createElement("td",null,b("React").createElement(b("XUIText.react"),{className:"_buj",size:"meta1"},c))))))};function a(){i.apply(this,arguments)}a.propTypes={queryString:c.string};a.propTypes={onClick:c.func.isRequired};e.exports=a}),null);
__d("CommerceProductItemSearchSelector.react",["ix","cx","fbt","invariant","CommerceAddProductScrollRow.react","CommerceProductItemSearch","Image.react","InfiniteScrollArea.react","LayerFadeOnHide","Link.react","ProfileImageBlockEntry.react","React","ReactDOM","XUIContextualDialog.react","XUISpinner.react","XUITextInput.react","curry","fbglyph"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);k=d&&d.prototype;function a(a,c){__p&&__p();k.constructor.call(this,a,c),this.$4=function(a){this.setState({isProductListVisible:a})}.bind(this),this.$12=function(a,c){c=a.description===""?a.price:a.price+" - "+a.description;return b("React").createElement("div",{className:"_2jjq",key:a.id,onClick:b("curry")(this.$13,[a]),role:"presentation"},b("React").createElement(b("ProfileImageBlockEntry.react"),{imgSrc:a.image_url,title:a.name,subtitle:c}))}.bind(this),this.$13=function(a){this.props.multiSelect||this.$8(),this.props.onProductSelected(a)}.bind(this),this.$10=function(event){this.setState({query:event.target.value}),this.$2(event.target.value)}.bind(this),this.$11=function(){this.state.hasNewData&&!this.state.loading&&this.$2(this.state.query)}.bind(this),this.$14=function(a,b){if(this.isUnmounted)return;var c={loading:!1,hasNewData:b};b&&(c.products=a);this.setState(c)}.bind(this),this.$8=function(){this.setState({isProductListVisible:!1})}.bind(this),this.$9=function(){this.props.showAsDropdownMenu&&this.state.productListDialogWidth===0&&this.$3(),this.setState({isProductListVisible:!0})}.bind(this),this.$1=new(b("CommerceProductItemSearch"))(a.pageID),this.state={hasNewData:!0,isProductListVisible:a.showListOnLaunch,loading:!1,products:[],productListDialogWidth:0,query:""}}a.prototype.componentDidMount=function(){this.$2(this.state.query)};a.prototype.componentDidUpdate=function(){this.state.productListDialogWidth===0&&this.$3()};a.prototype.componentWillUnmount=function(){this.isUnmounted=!0};a.prototype.$3=function(){var a=b("ReactDOM").findDOMNode(this.refs.searchBox).offsetWidth;this.props.multiSelect&&(a*=.75);this.setState({productListDialogWidth:a})};a.prototype.render=function(){return b("React").createElement("div",{className:this.props.className},this.$5(),this.$6())};a.prototype.$7=function(){if(this.state.loading)return b("React").createElement(b("XUISpinner.react"),{size:"small"});if(!this.props.showAsDropdownMenu)return b("React").createElement(b("Image.react"),{src:g("142454")});var a=this.state.isProductListVisible?g("142938"):g("142926");a=b("React").createElement(b("Image.react"),{src:a});var c=this.state.isProductListVisible?this.$8:this.$9;return b("React").createElement(b("Link.react"),{onClick:c},a)};a.prototype.$5=function(){return b("React").createElement("div",{className:"_22f5",ref:"searchBox"},b("React").createElement(b("XUITextInput.react"),{"aria-label":i._("Search to add products"),className:"_22f6",onChange:this.$10,onClick:this.$9,placeholder:i._("Search to add products"),ref:"input",role:"searchbox",value:this.state.query}),b("React").createElement("div",{className:"_22f7"},this.$7()))};a.prototype.$6=function(){var a=null;this.props.canCreateProduct&&(this.props.onAddProductClick||j(0,5040),a=b("React").createElement(b("CommerceAddProductScrollRow.react"),{onClick:this.props.onAddProductClick,queryString:this.props.canAddProductFromSearch?this.state.query.trim():null}));a=b("React").createElement(b("InfiniteScrollArea.react"),{distanceToEnd:1,onEndReached:this.$11,height:this.props.productScrollAreaHeight},a,this.state.products.map(this.$12,this));return!this.props.showAsDropdownMenu?b("React").createElement("div",{className:"_2jjp"},a):b("React").createElement(b("XUIContextualDialog.react"),{alignment:"right",autoFocus:!1,behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},contextRef:function(){return this.refs.searchBox}.bind(this),onToggle:this.$4,hideOnBlur:!0,hideOnEscape:!0,offsetY:-5,position:"below",shown:this.state.isProductListVisible,width:this.state.productListDialogWidth},a)};a.prototype.$2=function(a){this.$1.searchOrMore(a,this.$14),this.setState({loading:!0})};a.defaultProps={canAddProductFromSearch:!1,canCreateProduct:!1,multiSelect:!1,productScrollAreaHeight:300,showAsDropdownMenu:!1,showListOnLaunch:!1};a.propTypes={canAddProductFromSearch:c.bool,canCreateProduct:c.bool,multiSelect:c.bool,onAddProductClick:c.func,onProductSelected:c.func.isRequired,pageID:c.string.isRequired,productScrollAreaHeight:c.number,showAsDropdownMenu:c.bool,showListOnLaunch:c.bool};e.exports=a}),null);
__d("FBPaymentsCartProductSearchViewBase.react",["React"],(function(a,b,c,d,e,f){"use strict";var g;c=b("React").PropTypes;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;function a(){g.apply(this,arguments)}a.propTypes={canCreateCustomItem:c.bool.isRequired,multiSelect:c.bool,onCartItemSelected:c.func.isRequired,onCreateCustomItem:c.func,sellerID:c.string.isRequired,showListOnLaunch:c.bool};e.exports=a}),null);
__d("FBPaymentsCartProductSearchView.react",["CommerceProductItemSearchSelector.react","FBPaymentsCartItem","FBPaymentsCartProductSearchViewBase.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FBPaymentsCartProductSearchViewBase.react"));g=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$FBPaymentsCartProductSearchView1=function(a){a=a[0];var c=a.current_price,d=a.description,e=a.id,f=a.image_url,g=a.inventory;a=a.name;e=new(b("FBPaymentsCartItem"))({id:e,imageURL:f,isSelectable:!0,quantity:1,quantityLimit:g,subtitle:d,title:a,unitPrice:{amount:c.raw_label,currency:c.currency}});this.props.onCartItemSelected(e)}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("CommerceProductItemSearchSelector.react"),{canCreateProduct:this.props.canCreateCustomItem,onAddProductClick:this.props.onCreateCustomItem,onProductSelected:this.$FBPaymentsCartProductSearchView1,pageID:this.props.sellerID,productScrollAreaHeight:250,showAsDropdownMenu:!0,showListOnLaunch:this.props.showListOnLaunch,multiSelect:this.props.multiSelect})};e.exports=a}),null);
__d("FBPaymentsCartProductSearchContainer.react",["FBPaymentsCartProductSearchContainerBase.react","FBPaymentsCartProductSearchView.react"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("FBPaymentsCartProductSearchContainerBase.react"));g&&g.prototype;a.prototype.__getView=function(){return b("FBPaymentsCartProductSearchView.react")};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FBPaymentsCartItemSummaryBase.react",["fbt","PECurrency","PECurrency.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("PECurrency").DEFAULT_AMOUNT_OFFSET;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.PRODUCT_IMAGE_SIZE=48,this.handleEditClick=function(){this.props.onEdit(this.props.cartItemKey)}.bind(this),this.handleRemoveClick=function(){this.props.onRemove(this.props.cartItemKey)}.bind(this),b}a.prototype.getFormattedPrice=function(a){return b("React").createElement(b("PECurrency.react"),{code:a.currency,value:i*Number(a.amount)})};a.prototype.getQuantityDescription=function(){var a=this.props.cartItem;return a.quantity>1?g._("Quantity: {quantity} ({unit_price} ea)",[g._param("quantity",a.quantity),g._param("unit_price",this.getFormattedPrice(a.unitPrice))]):g._("Quantity: {quantity}",[g._param("quantity",a.quantity)])};a.prototype.getEditLabel=function(){return g._("Edit")};a.prototype.getRemoveLabel=function(){return g._("Remove")};a.propTypes={cartItem:c.object.isRequired,cartItemKey:c.number.isRequired,onEdit:c.func.isRequired,onRemove:c.func.isRequired};e.exports=a}),null);
__d("FBPaymentsCartItemSummary.react",["cx","FBPaymentsCartItemSummaryBase.react","FBPaymentsItemSummaryView.react","Link.react","React","XUIGrayText.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("FBPaymentsCartItemSummaryBase.react"));h&&h.prototype;a.prototype.render=function(){var a=this.props.cartItem,c=b("React").createElement(b("XUIGrayText.react"),{className:"_486y",display:"block",shade:"dark",size:"meta1"},a.title),d=b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"dark",size:"meta1"},this.getQuantityDescription()),e=b("React").createElement(b("XUIGrayText.react"),{className:"_3-9a",shade:"light",size:"meta1"},this.getFormattedPrice(a.getPrice())),f=b("React").createElement("div",{className:"_3-8w"},b("React").createElement(b("Link.react"),{className:"_3-90",onClick:this.handleEditClick},this.getEditLabel()),b("React").createElement(b("Link.react"),{onClick:this.handleRemoveClick},this.getRemoveLabel()));return b("React").createElement(b("FBPaymentsItemSummaryView.react"),{className:"_36ny",imageSrc:a.imageURL||"",imageHeight:this.PRODUCT_IMAGE_SIZE,imageWidth:this.PRODUCT_IMAGE_SIZE,rightContent:e},c,d,f)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("FBPaymentsCartSummaryScreenBase.react",["fbt","PECurrency","PECurrency.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("PECurrency").DEFAULT_AMOUNT_OFFSET;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.shouldShowSearchBar=function(){return!!this.props.productSearchContainer};a.prototype.shouldShowBonusTracker=function(){return!!this.props.isBonusTrackerEnabled};a.prototype.getFormattedPrice=function(a){return b("React").createElement(b("PECurrency.react"),{code:a.currency,value:i*Number(a.amount)})};a.prototype.getSubtotalLabel=function(){return g._("Subtotal")};a.prototype.getScreenTitle=function(){return this.props.title};a.prototype.getDisabledButtonText=function(){return g._("No Products Selected")};a.prototype.getContinueButtonText=function(){return this.props.continueButtonLabel||g._("Continue")};a.prototype.getButtonText=function(){return this.props.isContinueButtonDisabled?this.getDisabledButtonText():this.getContinueButtonText()};function a(){h.apply(this,arguments)}a.propTypes={buyerID:c.string,cartItems:c.oneOfType([c.arrayOf(c.shape({id:c.string.isRequired})),c.object.isRequired]),continueButtonLabel:c.node,isBonusTrackerEnabled:c.bool,isContinueButtonDisabled:c.bool.isRequired,onContinueButtonClicked:c.func,onEditCartItem:c.func.isRequired,onRemoveCartItem:c.func.isRequired,productSearchContainer:c.element,subtotal:c.object.isRequired,title:c.node.isRequired};e.exports=a}),null);
__d("FBPaymentsSellerBonusTracker_banner.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LinkedField",alias:null,name:"ranges",storageKey:null,args:null,concreteType:"EntityAtRange",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"entity",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"length",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"offset",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null}];return{kind:"Fragment",name:"FBPaymentsSellerBonusTracker_banner",type:"PaymentInvoiceBanner",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:"title",name:"title_with_entities",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:a},{kind:"LinkedField",alias:"subtitle",name:"subtitle_with_entities",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:a},{kind:"LinkedField",alias:"extraData",name:"extra_data",storageKey:null,args:null,concreteType:"PaymentInvoiceBannerExtraData",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"key",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"value",args:null,storageKey:null}]},{kind:"ScalarField",alias:"imageUrl",name:"image_url",args:null,storageKey:null}]}}();e.exports=a}),null);
__d("FBPaymentsSellerBonusTracker.react",["cx","FDSCloseButton.react","FDSText.react","FlexLayout.react","Image.react","Layout.react","React","RelayModern","TextWithEntities.react","suiMargin","FBPaymentsSellerBonusTracker_banner.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;var i=b("Layout.react").Column,j=b("Layout.react").FillColumn,k=40;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={isShown:!0},this.onCloseButtonClick=function(){this.setState({isShown:!1})}.bind(this),b}a.prototype.getExtraData=function(){var a;a=((a=this.props)!=null?(a=a.banner)!=null?a.extraData:a:a)||[];return a.reduce(function(a,b){a[b.key||""]=b.value;return a},{})};a.prototype.renderEarnedBonus=function(a){return a===null||a===undefined?null:b("React").createElement(b("FlexLayout.react"),{justify:"center"},b("React").createElement(b("FDSText.react"),{color:"highlight",size:"body3"},a))};a.prototype.renderImage=function(){var a;a=(a=this.props)!=null?(a=a.banner)!=null?a.imageUrl:a:a;if(!a)return null;var c=this.props.compactView;return b("React").createElement(b("FlexLayout.react"),{align:"center",className:(c?"":"_3-9c")+(c?" _3-90":""),justify:"center"},b("React").createElement(b("Image.react"),{height:k,src:a,width:k}))};a.prototype.renderProgress=function(a){return!a||!a.progress_lowerbound||!a.progress_upperbound||!a.progress_description?null:b("React").createElement(b("Layout.react"),null,b("React").createElement(i,null,b("React").createElement(b("FDSText.react"),{color:"secondary",size:"body2"},a.progress_lowerbound)),b("React").createElement(j,{className:"_2bog"},b("React").createElement(b("FDSText.react"),{size:"body2",weight:"bold"},a.progress_description),this.renderEarnedBonus(a.progress_subdescription)),b("React").createElement(i,null,b("React").createElement(b("FDSText.react"),{color:"secondary",size:"body2"},a.progress_upperbound)))};a.prototype.renderProgressBar=function(a){if(!a||!a.progress)return null;a=parseFloat(a.progress||"0")*100;a=Math.max(a,1);return b("React").createElement("div",{className:"_2bow"},b("React").createElement("div",{className:"_2box"+(a===100?" _19wt":""),style:{width:a+"%"}}))};a.prototype.renderSubtitle=function(){var a;a=(a=this.props)!=null?(a=a.banner)!=null?a.subtitle:a:a;return!a?null:b("React").createElement(b("FDSText.react"),{color:"secondary",display:"block",margin:(this.props.compactView?"_3-8w":"")+(this.props.compactView?"":" _5soe"),size:"body1"},b("React").createElement(b("TextWithEntities.react"),a))};a.prototype.renderTitle=function(){var a;a=(a=this.props)!=null?(a=a.banner)!=null?a.title:a:a;return!a?null:b("React").createElement(b("FDSText.react"),{size:"header3",weight:"bold"},b("React").createElement(b("TextWithEntities.react"),a))};a.prototype.render=function(){if(!this.state.isShown)return null;var a=this.getExtraData(),c=this.props.compactView;c=c?b("React").createElement(b("Layout.react"),{className:"_2bo- _6hj9"},b("React").createElement(b("Layout.react"),null,b("React").createElement(i,null,this.renderImage()),b("React").createElement(j,null,this.renderTitle(),this.renderSubtitle()),b("React").createElement(i,null,b("React").createElement(b("FDSCloseButton.react"),{onClick:this.onCloseButtonClick}))),b("React").createElement(b("Layout.react"),null,b("React").createElement(j,null,this.renderProgressBar(a),this.renderProgress(a)))):b("React").createElement(b("Layout.react"),{className:"_2bo-"},b("React").createElement(j,null,this.renderTitle(),this.renderSubtitle(),this.renderProgressBar(a),this.renderProgress(a)),b("React").createElement(i,null,this.renderImage()));return c};e.exports=c(a,{banner:function(){return b("FBPaymentsSellerBonusTracker_banner.graphql")}})}),null);
__d("FBPaymentsSellerBonusTrackerContainerQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"queryParams",type:"PaymentInvoiceBannerListParams!",defaultValue:null}],b=[{kind:"Variable",name:"query_params",variableName:"queryParams",type:"PaymentInvoiceBannerListParams!"}],c=[{kind:"LinkedField",alias:null,name:"ranges",storageKey:null,args:null,concreteType:"EntityAtRange",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"entity",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"length",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"offset",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null}];return{kind:"Request",operationKind:"query",name:"FBPaymentsSellerBonusTrackerContainerQuery",id:"1963701027034885",text:null,metadata:{},fragment:{kind:"Fragment",name:"FBPaymentsSellerBonusTrackerContainerQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:"list",name:"payment_invoice_banner_list",storageKey:null,args:b,concreteType:"PaymentInvoiceBannerList",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"banners",storageKey:null,args:null,concreteType:"PaymentInvoiceBanner",plural:!0,selections:[{kind:"FragmentSpread",name:"FBPaymentsSellerBonusTracker_banner",args:null}]}]}]},operation:{kind:"Operation",name:"FBPaymentsSellerBonusTrackerContainerQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:"list",name:"payment_invoice_banner_list",storageKey:null,args:b,concreteType:"PaymentInvoiceBannerList",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"banners",storageKey:null,args:null,concreteType:"PaymentInvoiceBanner",plural:!0,selections:[{kind:"LinkedField",alias:"title",name:"title_with_entities",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:c},{kind:"LinkedField",alias:"subtitle",name:"subtitle_with_entities",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:c},{kind:"LinkedField",alias:"extraData",name:"extra_data",storageKey:null,args:null,concreteType:"PaymentInvoiceBannerExtraData",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"key",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"value",args:null,storageKey:null}]},{kind:"ScalarField",alias:"imageUrl",name:"image_url",args:null,storageKey:null}]}]}]}}}();e.exports=a}),null);
__d("FBPaymentsSellerBonusTrackerContainer.react",["cx","AllPaymentTypeFields","FBPaymentsSellerBonusTracker.react","React","RelayAPIConfig","RelayFBEnvironment","RelayModern","keyMirror","FBPaymentsSellerBonusTrackerContainerQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=b("RelayModern").QueryRenderer;b("RelayModern").graphql;var k=b("keyMirror")(b("AllPaymentTypeFields"));c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a){h.constructor.call(this,a),b("RelayAPIConfig").setActorID(a.pageID)}a.prototype.render=function(){var a=this.props.compactView;return b("React").createElement(j,{environment:b("RelayFBEnvironment"),query:i||(i=function(){return b("FBPaymentsSellerBonusTrackerContainerQuery.graphql")}),variables:{actorID:this.props.pageID,queryParams:{origin:this.props.origin,product_type:k.NMOR_PAGES_COMMERCE,thread_id:this.props.buyerID}},render:function(c){c.error;c=c.props;c=((c=c)!=null?(c=c.list)!=null?c.banners:c:c)||[];return c.length===0?null:b("React").createElement("div",{className:"_1uzl"+(a?" _6hj2":"")},c.map(function(c,d){return b("React").createElement(b("FBPaymentsSellerBonusTracker.react"),{banner:c,compactView:a,key:d})}))}})};a.defaultProps={compactView:!1};e.exports=a}),null);
__d("InvoiceBannerOrigin",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({INBOX:"INBOX",THREAD:"THREAD",INVOICING:"INVOICING",TOP_UP:"TOP_UP",ONBOARDING_DIALOG:"ONBOARDING_DIALOG",ONBOARDING:"ONBOARDING",SETTINGS:"SETTINGS",MANAGE_ORDERS:"MANAGE_ORDERS"})}),null);
__d("FBPaymentsCartSummaryScreen.react",["cx","FBPaymentsCartBody.react","FBPaymentsCartFooter.react","FBPaymentsCartHeader.react","FBPaymentsCartItemSummary.react","FBPaymentsCartSummaryScreenBase.react","FBPaymentsSellerBonusTrackerContainer.react","InvoiceBannerOrigin","LeftRight.react","React","ScrollableArea.react","XUIButton.react","XUIGrayText.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=304;h=babelHelpers.inherits(a,b("FBPaymentsCartSummaryScreenBase.react"));h&&h.prototype;a.prototype.$FBPaymentsCartSummaryScreen1=function(){return!this.shouldShowSearchBar()?null:b("React").createElement("div",{className:"_222p"},this.props.productSearchContainer)};a.prototype.$FBPaymentsCartSummaryScreen2=function(){var a=this.props.cartItems.map(function(a,c){return b("React").createElement(b("FBPaymentsCartItemSummary.react"),{cartItem:a,cartItemKey:c,key:c,onEdit:this.props.onEditCartItem,onRemove:this.props.onRemoveCartItem})}.bind(this));return b("React").createElement(b("ScrollableArea.react"),{fade:!0,height:i,shadow:!1},a)};a.prototype.$FBPaymentsCartSummaryScreen3=function(){return!this.shouldShowBonusTracker()?null:b("React").createElement(b("FBPaymentsSellerBonusTrackerContainer.react"),{buyerID:this.props.buyerID,compactView:!0,origin:b("InvoiceBannerOrigin").INVOICING,pageID:this.props.sellerID})};a.prototype.render=function(){return b("React").createElement("div",null,b("React").createElement(b("FBPaymentsCartHeader.react"),{title:this.getScreenTitle()},b("React").createElement("div",null,this.$FBPaymentsCartSummaryScreen1(),this.$FBPaymentsCartSummaryScreen3())),b("React").createElement(b("FBPaymentsCartBody.react"),null,this.$FBPaymentsCartSummaryScreen2()),b("React").createElement(b("FBPaymentsCartFooter.react"),null,b("React").createElement(b("LeftRight.react"),{className:"_3-96"},b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"dark"},this.getSubtotalLabel()),b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"dark"},this.getFormattedPrice(this.props.subtotal))),b("React").createElement(b("XUIButton.react"),{className:"_222r",disabled:this.props.isContinueButtonDisabled,label:this.getButtonText(),size:"large",onClick:this.props.onContinueButtonClicked,use:"confirm"})))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("FBPaymentsCartFlowContainer.react",["FBPaymentsCartFlowContainerBase.react","FBPaymentsCartFlowView.react","FBPaymentsCartProductConfigurationContainer.react","FBPaymentsCartProductSearchContainer.react","FBPaymentsCartSummaryScreen.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;g=babelHelpers.inherits(a,b("FBPaymentsCartFlowContainerBase.react"));h=g&&g.prototype;a.prototype.__getCartFlowView=function(){return b("FBPaymentsCartFlowView.react")};a.prototype.__getCartSummaryScreen=function(){return b("FBPaymentsCartSummaryScreen.react")};a.prototype.__getCartProductConfigurationContainer=function(){return b("FBPaymentsCartProductConfigurationContainer.react")};a.prototype.__getProductSearchContainer=function(){return b("FBPaymentsCartProductSearchContainer.react")};a.prototype.render=function(){return h.render.call(this)};function a(){g.apply(this,arguments)}a.propTypes=babelHelpers["extends"]({},b("FBPaymentsCartFlowContainerBase.react").propTypes);e.exports=a}),null);
__d("FBPaymentsInvoiceFlowContainerBase.react",["fbt","invariant","Promise","FBPaymentsCartItem","FBPaymentsCheckoutConstants","FBPaymentsModulesFlowType","FBPaymentsPriceListHelper","PaymentItemTypeFields","React","abstractMethod","keyMirror"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j=b("FBPaymentsCheckoutConstants").Extensions,k=b("FBPaymentsCheckoutConstants").OrderStatusModelType,l=b("FBPaymentsCheckoutConstants").PaymentAction,m=b("FBPaymentsCheckoutConstants").PaymentCallbackUpdateState,n=b("keyMirror")({CREATE_CART:null,CREATE_INVOICE:null});d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(a){__p&&__p();i.constructor.call(this,a),this.cartConfigLoader=function(){return new(b("Promise"))(function(a,b){this.__getAPI().fetchInvoiceConfig({buyer_id:this.props.buyerID,seller_id:this.props.sellerID,client:this.props.client},function(b){this.setState({invoiceConfig:b}),a(b.invoiceCreationConfig)}.bind(this),b)}.bind(this))}.bind(this),this.$2=function(a){this.setState({buyerProfile:a})}.bind(this),this.$1=function(a){this.setState({invoiceConfig:a,invoiceItems:[],isLoading:!1})}.bind(this),this.$3=function(a){this.setState({step:n.CREATE_INVOICE,invoiceItems:a.toArray()})}.bind(this),this.$4=function(){this.setState({step:n.CREATE_CART})}.bind(this),this.$5=function(){var a=!1,b=new Map();this.props.onClose&&this.props.onClose(a,b)}.bind(this),this.$6=function(a,c,d){__p&&__p();d=[];if(!this.props.invoiceID){var e=this.state.invoiceItems||[];d=e.map(b("FBPaymentsCartItem").serializeForServer)}e=((e=a.get(j.CUSTOM_OPTIONS))!=null?e.extraData:e)||{};var f=e.optionId;e=e.customOption;var g,h=[];e?h.push({title:e.optionTitle,currency_amount:e.optionPrice}):f&&(g=[f]);f=((e=a.get(j.NOTE))!=null?e.extraData:e)||{};a=f.note;this.__getAPI().createInvoice({actor_id:this.props.sellerID,client:this.props.client,seller_id:this.props.sellerID,buyer_id:this.props.buyerID,invoice_id:this.props.invoiceID,items:d,notes:a,selected_options:{shipping_options:g},custom_shipping_options:h},this.$7.bind(this,c),this.$8.bind(this,c))}.bind(this),this.state={buyerProfile:null,invoiceConfig:null,invoiceItems:null,step:this.props.invoiceID?n.CREATE_INVOICE:n.CREATE_CART,isLoading:!0}}a.prototype.UNSAFE_componentWillMount=function(){this.props.invoiceID&&this.__getAPI().fetchInvoiceConfig({buyer_id:this.props.buyerID,seller_id:this.props.sellerID,product_id:this.props.invoiceID,client:this.props.client},this.$1),this.__getAPI().fetchUserBasicProfile({id:this.props.buyerID},this.$2)};a.prototype.$7=function(a,b){a({state:m.DONE});a=!0;var c=new Map();c.set("invoice",{invoiceID:b});this.props.onClose&&this.props.onClose(a,c)};a.prototype.$8=function(a,b){a({state:m.ERROR,errorMessage:b.message})};a.prototype.$9=function(){__p&&__p();var a=this.state.invoiceConfig;if(!a)return{};a=a.invoiceContentConfiguration;var c=a.priceList;a=a.purchaseInfo;var d;if(this.props.invoiceID){var e=c.find(function(a){return Object.prototype.hasOwnProperty.call(a,"priceList")})||{};e=e.priceList||[];d=e.map(function(a){a.price||h(0,2580);return b("FBPaymentsPriceListHelper").newBasePrice(a.label,a.price)})}else e=this.state.invoiceItems||[],d=e.map(function(a){return b("FBPaymentsPriceListHelper").newBasePrice(this.$10(a),a.getPrice())}.bind(this));e=[{label:this.$11(),priceList:d}];this.props.invoiceID||(e=b("FBPaymentsPriceListHelper").merge(e,c));d=this.state.buyerProfile||{};c={version:"1.0",paymentInfo:{payCallback:this.$6,paymentItemType:b("PaymentItemTypeFields").NMOR_PAGES_COMMERCE,action:l.CUSTOM_CALLBACK,receiverId:this.props.sellerID},orderStatusModel:{type:k.FIXED_AMOUNT},contentConfiguration:{entity:{participant:{title:d.name,imageURL:d.profilePictureUrl}},items:[],priceList:e,purchaseInfo:a,payActionContent:{actionTitle:this.$12(),backButton:!this.props.invoiceID,backButtonCallback:this.props.invoiceID?null:this.$4,customTermsAndPoliciesText:b("React").createElement("span",null)}}};return c};a.prototype.$13=function(){return g._("Payment Request")};a.prototype.$11=function(){return g._("Subtotal")};a.prototype.$14=function(){return g._("Continue to Payment Request")};a.prototype.$12=function(){return g._("Request Payment")};a.prototype.$10=function(a){if(a.quantity<=1)return a.title;else return g._({"*":"{Number of item} x {Item title}"},[g._param("Number of item",a.quantity,[0]),g._param("Item title",a.title)])};a.prototype.render=function(){if(this.props.invoiceID&&this.state.isLoading)return b("React").createElement("div",null);var a=this.__getCartContainer(),c=this.state.step===n.CREATE_CART;a=b("React").createElement(a,{buyerID:this.props.buyerID,configLoader:this.cartConfigLoader,continueButtonLabel:this.$14(),isBonusTrackerEnabled:this.props.isBonusTrackerEnabled,onClose:this.props.onClose,onContinue:this.$3,sellerID:this.props.sellerID,shown:c});c=this.__getCheckoutContainer();c=this.state.step===n.CREATE_INVOICE?b("React").createElement(c,{configuration:this.$9(),dialogTitle:this.$13(),onCheckoutClosed:this.$5,onConfirmationClosed:this.props.onClose,paymentModuleFlowType:b("FBPaymentsModulesFlowType").INVOICE,invoiceID:this.props.invoiceID}):null;return b("React").createElement("div",null,a,c)};a.prototype.__getCartContainer=function(){return b("abstractMethod")("FBPaymentsInvoiceFlowContainerBase","__getCartContainer")};a.prototype.__getCheckoutContainer=function(){return b("abstractMethod")("FBPaymentsInvoiceFlowContainerBase","__getCheckoutContainer")};a.prototype.__getAPI=function(){return b("abstractMethod")("FBPaymentsInvoiceFlowContainerBase","__getAPI")};a.propTypes={buyerID:c.string.isRequired,client:c.string.isRequired,invoiceID:c.string,isBonusTrackerEnabled:c.bool,onClose:c.func,sellerID:c.string.isRequired};e.exports=a}),null);
__d("FBPaymentsInvoiceFlowContainer.react",["FBPaymentsCartFlowContainer.react","FBPaymentsCheckoutFlowContainer.react","FBPaymentsInvoiceFlowContainerBase.react","FBPaymentsModulesAPI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;g=babelHelpers.inherits(a,b("FBPaymentsInvoiceFlowContainerBase.react"));h=g&&g.prototype;a.prototype.__getCartContainer=function(){return b("FBPaymentsCartFlowContainer.react")};a.prototype.__getCheckoutContainer=function(){return b("FBPaymentsCheckoutFlowContainer.react")};a.prototype.__getAPI=function(){return b("FBPaymentsModulesAPI")};a.prototype.render=function(){return h.render.call(this)};function a(){g.apply(this,arguments)}a.propTypes=babelHelpers["extends"]({},b("FBPaymentsInvoiceFlowContainerBase.react").propTypes);e.exports=a}),null);
__d("PagesMessagingPerfTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:PagesMessagingPerfLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:PagesMessagingPerfLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PagesMessagingPerfLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setEventName=function(a){this.$1.event_name=a;return this};a.prototype.setExceptionCode=function(a){this.$1.exception_code=a;return this};a.prototype.setExceptionMessage=function(a){this.$1.exception_message=a;return this};a.prototype.setPageID=function(a){this.$1.page_id=a;return this};a.prototype.setPerfTime=function(a){this.$1.perf_time=a;return this};a.prototype.setStack=function(a){this.$1.stack=a;return this};a.prototype.setThreadOffset=function(a){this.$1.thread_offset=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={event_name:!0,exception_code:!0,exception_message:!0,page_id:!0,perf_time:!0,stack:!0,thread_offset:!0,vc:!0};e.exports=a}),null);
__d("PresmaUsageTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:PresmaUsageLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:PresmaUsageLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PresmaUsageLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setBusinessID=function(a){this.$1.business_id=a;return this};a.prototype.setUsageEvent=function(a){this.$1.usage_event=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={business_id:!0,usage_event:!0,vc:!0};e.exports=a}),null);
__d("MessengerHorizontalScroll.react",["ix","cx","fbt","Animation","Image.react","Link.react","React","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=b("React").PropTypes;var j=250,k="left",l="right";c=b("React").createClass({displayName:"MessengerHorizontalScroll",_rightArrowBoundOnClick:Function,_leftArrowBoundOnClick:Function,propTypes:{batchScroll:a.bool.isRequired,childPadding:a.number.isRequired,childWidth:a.number.isRequired,freeScroll:a.bool.isRequired,leftOffset:a.number.isRequired,numChildrenVisible:a.number.isRequired,width:a.number.isRequired,displayInlineFlex:a.bool},getInitialState:function(){var a=this._calculateState();return babelHelpers["extends"]({index:0,scrollLeft:0},a)},getDefaultProps:function(){return{batchScroll:!1,childPadding:0,freeScroll:!1,leftOffset:0,numChildrenVisible:1,displayInlineFlex:!1}},UNSAFE_componentWillMount:function(){this._rightArrowBoundOnClick=this._updatePosition.bind(this,l),this._leftArrowBoundOnClick=this._updatePosition.bind(this,k)},UNSAFE_componentWillReceiveProps:function(a){this.setState(this._calculateState(a))},render:function(){var a=this.props;this.refs&&this.refs.childContainer&&!a.freeScroll&&new(b("Animation"))(this.refs.childContainer).to("scrollLeft",this.state.scrollLeft).duration(j).go();var c=this._calculateVisibleWidth(),d=this.state.scrollLeft===0||a.freeScroll||c<a.width;c=this.state.scrollLeft===this.state.maxScrollLeft||a.freeScroll||c<a.width;var e=a.freeScroll?{overflowY:"hidden",overflowX:"scroll",width:a.width}:{overflow:"hidden",width:a.width};return b("React").createElement("div",{className:"_5agf",style:{width:a.width}},b("React").createElement(b("Link.react"),{"aria-label":i._("See more results from the left"),className:(d?"hidden_elem":"")+" _5agg",onClick:this._leftArrowBoundOnClick,role:"button"},b("React").createElement(b("Image.react"),{className:"_5agh",src:g("141823")})),b("React").createElement(b("Link.react"),{"aria-label":i._("See more results from the right"),className:(c?"hidden_elem":"")+" _5agi",onClick:this._rightArrowBoundOnClick,role:"button"},b("React").createElement(b("Image.react"),{className:"_5agh",src:g("141833")})),b("React").createElement("div",{className:"_5agj",ref:"childContainer",style:e},b("React").createElement("div",{className:"_5agk"+(a.displayInlineFlex?" _76lw":"")},this._renderChildren())))},_calculateState:function(a){if(!a||a.children!==this.props.children)var c=b("React").Children.map(this.props.children,function(a,b){return this._onChildClick.bind(null,b)}.bind(this));return{maxScrollLeft:this._getMaxScrollLeft(),boundChildOnClicks:c||this.state.boundChildOnClicks}},_updatePosition:function(a){__p&&__p();var c=b("React").Children.count(this.props.children)-this.props.numChildrenVisible,d=this.state.scrollLeft;d=d;var e=this.state.index;switch(a){case l:this.props.batchScroll?(e+=this.props.numChildrenVisible,e>c&&(e=c)):e+=1;d=Math.min(this._getNextScrollLeft(e),this.state.maxScrollLeft);break;case k:this.props.batchScroll?(e-=this.props.numChildrenVisible,e<0&&(e=0)):e-=1;d=Math.max(0,this._getNextScrollLeft(e));break}this.setState({scrollLeft:d,index:e})},_onChildClick:function(a){if(this._isVisibleChild(a))return;a=a<this.state.index?k:l;this._updatePosition(a)},_getNextScrollLeft:function(a){if(a===0)return 0;var b=this.props,c=b.width,d=b.childWidth,e=b.childPadding,f=b.leftOffset;b=b.numChildrenVisible;var g=d*b;b=e*(b-1);c=(c-(g+b))/2;g=a*(e+d)-c;return g+f},_calculateVisibleWidth:function(){var a=this.props,c=b("React").Children.count(a.children);return a.childWidth*c+a.childPadding*(c-1)+a.leftOffset},_getMaxScrollLeft:function(){var a=this._calculateVisibleWidth();return a-this.props.width},_renderChildren:function(){var a=this.props,c=b("React").Children.count(a.children);return b("React").Children.map(a.children,function(d,e){var f={};f.width=a.childWidth;e<c-1&&(f.paddingRight=a.childPadding);e===0&&a.leftOffset&&(f.paddingLeft=a.leftOffset);var g=this._isVisibleChild(e),h=a.freeScroll?null:this.state.boundChildOnClicks[e];return b("React").createElement("div",{className:"_5agl"+(g||a.freeScroll?" _6-1x":""),key:e,onClick:h,role:"presentation",style:f},d)}.bind(this))},_isVisibleChild:function(a){var c=this.props,d=c.children;c=c.numChildrenVisible;d=b("React").Children.count(d);var e=this.state.index;d=e===d-1;var f=d?e:e+c-1;d=d?e-(c-1):e;return a<=f&&a>=d}});e.exports=c}),null);
__d("PagesMessagingPerfLoggerEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SEND_MESSAGE_JS_HANDLE_ERROR:"messages_send_message_js_handle_error",MESSAGELIST_LOAD_START:"messages_messagelist_load_start",MESSAGELIST_LOAD_END:"messages_messagelist_load_end",THREADLIST_LOAD_MORE_EVENT:"threadlist_load_more",THREADLIST_RENDER_COMPLETE_EVENT:"threadlist_render_complete",SEND_MESSAGE_JS_EXCEPTION:"messages_send_message_js_exception",SEND_MESSAGE_JS_END:"messages_send_message_js_end",SEND_MESSAGE_JS_START:"messages_send_message_js_start",COMPOSER_BLOCKED_WITH_WARNING:"composer_blocked_with_warning"})}),null);
__d("MercuryPageServerRequests",["CurrentUser","MercuryAPIArgsSource","MercuryAssert","MercuryServerDispatcher","MercuryServerRequests","MercurySingletonProvider","MessagingTag","MessengerServerPayloadTransformer.bs","PageMessageEnumTag","PagesMessagingPerfLoggerEvent","PagesMessagingPerfTypedLogger","PagesMessengerThreadUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("MercuryAPIArgsSource").MERCURY;a=babelHelpers.inherits(i,b("MercuryServerRequests"));g=a&&a.prototype;i.getForFBID=function(a){return j.getForFBID(a)};i.get=function(){return j.get()};function i(a){g.constructor.call(this,a);a={"/pages/messaging/thread_tag/add/":{request_user_id:a,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,batch_function:this.$MercuryPageServerRequests1,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},"/pages/messaging/thread_tag/remove/":{request_user_id:a,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,batch_function:this.$MercuryPageServerRequests1,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},"/pages/messaging/thread_tag/list/":{request_user_id:a,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a,b){return this.$MercuryPageServerRequests2(a,b)}.bind(this)},"/pages/messaging/thread_custom_tags/list/":{request_user_id:a,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a,b){return this.$MercuryPageServerRequests2(a,b)}.bind(this)},"/pages/messaging/create_note/":{request_user_id:a,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},"/pages/messaging/owner/list/":{request_user_id:a,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a,b){return this.$MercuryPageServerRequests2(a,b)}.bind(this)}};b("MercuryServerDispatcher").registerEndpoints(a)}i.prototype.$MercuryPageServerRequests2=function(a,c){if(a.graphql_payload){var d=a.graphql_payload.map(function(c){return b("MessengerServerPayloadTransformer.bs").transformThread(a.viewer,c,a.for_page)});d={ordered_threadlists:a.ordered_threadlists,payload_source:a.payload_source,threads:d};this.__handleUpdate(d,c)}else this.__handleUpdate(a,c)};i.prototype.$MercuryPageServerRequests1=function(a,b){var c=a?a.tag_name:b.tag_name;a=a?a.thread_ids:[];b=b?b.thread_ids:[];a=a.concat(b);b={tag_name:c,thread_ids:a};return b};i.prototype.addThreadFlag=function(a,c){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(a){a={thread_ids:[a],tag_name:b("PageMessageEnumTag").FLAG};this.__sendRequest("/pages/messaging/thread_tag/add/",a)}.bind(this))};i.prototype.createNote=function(a,c,d){b("MercuryAssert").isThreadID(d),this.__threadIDMap.getServerIDFromClientID(d,function(b){b={body:a,message_id:c,other_user_fbid:b};this.__sendRequest("/pages/messaging/create_note/",b)}.bind(this))};i.prototype.fetchThreadlistInfo=function(a,c,d,e,f,i){__p&&__p();d===void 0&&(d=b("MessagingTag").INBOX);f===void 0&&(f=h);var j={folder:d,offset:a,limit:c,tag_name:null,custom_tags_filter:null,custom_tags:[],enum_tag:"",owner:"",owner_filter:null};if(b("PagesMessengerThreadUtils").isPageSpecficEnumFilter(e)){j.tag_name=e;this.__sendRequest("/pages/messaging/thread_tag/list/",j);return}if(e&&b("PagesMessengerThreadUtils").isCustomTagsFilter(e)){j.custom_tags_filter=e;j.custom_tags=b("PagesMessengerThreadUtils").parseCustomTagsFilter(e);b("PagesMessengerThreadUtils").isCustomTagsWithFlagFilter(e)&&(j.enum_tag=b("PageMessageEnumTag").FLAG);this.__sendRequest("/pages/messaging/thread_custom_tags/list/",j);return}if(e&&b("PagesMessengerThreadUtils").isOwnerFilter(e)){j.owner_filter=e;j.owner=b("PagesMessengerThreadUtils").parseOwnerFilter(e);this.__sendRequest("/pages/messaging/owner/list/",j);return}g.fetchThreadlistInfo.call(this,a,c,d,e,f,i)};i.prototype.removeThreadFlag=function(a,c){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(a){a={thread_ids:[a],tag_name:b("PageMessageEnumTag").FLAG};this.__sendRequest("/pages/messaging/thread_tag/remove/",a)}.bind(this))};i.prototype.toString=function(){return"MercuryPageServerRequests"};i.prototype.__logMercurySendError=function(a){new(b("PagesMessagingPerfTypedLogger"))().setPageID(this.__getFBID()).setEventName(b("PagesMessagingPerfLoggerEvent").SEND_MESSAGE_JS_HANDLE_ERROR).setExceptionMessage(a.error_data.description).setExceptionCode(a.error_data.code).log(),g.__logMercurySendError.call(this,a)};i.prototype.__getForAsyncRequest=function(a){a=a.getData();a=a.request_user_id?a.request_user_id:b("CurrentUser").getID();return i.getForFBID(a)};var j=new(b("MercurySingletonProvider"))(i);e.exports=i}),null);
__d("MercuryPageThreadActions",["MercuryActionType","MercuryPageServerRequests","MercuryPayloadSource","MercurySingletonMixin","MercuryThreadActions","MessagingTag"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("MercuryThreadActions"));g=c&&c.prototype;function a(a){"use strict";g.constructor.call(this,a),this.__serverRequests=b("MercuryPageServerRequests").getForFBID(a)}a.prototype.addFlag=function(a,b){"use strict";this.batchFlag([a],b)};a.prototype.batchAddFlag=function(a,b){"use strict";a.forEach(function(a){this.__serverRequests.addThreadFlag(a,b)}.bind(this)),this.__dispatcher.handleUpdate(this.$MercuryPageThreadActions1(a,!0,b))};a.prototype.removeFlag=function(a,b){"use strict";this.batchRemoveFlag([a],b)};a.prototype.batchRemoveFlag=function(a,b){"use strict";a.forEach(function(a){this.__serverRequests.removeThreadFlag(a,b)}.bind(this)),this.__dispatcher.handleUpdate(this.$MercuryPageThreadActions1(a,!1,b))};a.prototype.batchChangeFolderToBackground=function(a,c){"use strict";this.batchChangeFolder(a,b("MessagingTag").PAGE_BACKGROUND)};a.prototype.batchChangeFolderToInbox=function(a,c){"use strict";this.batchChangeFolder(a,b("MessagingTag").INBOX)};a.prototype.$MercuryPageThreadActions1=function(a,c,d){"use strict";return this.__constructClientPayload(a,b("MercuryActionType").CHANGE_FLAG,b("MercuryPayloadSource").CLIENT_CHANGE_FLAG,{mark_as_flag:c,source:d})};Object.assign(a,b("MercurySingletonMixin"),{_instances:{}});e.exports=a}),null);
__d("PageCustomerConstants",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a={ActionTypes:b("keyMirror")({UPDATE_CUSTOMER_ACTIONS:null,UPDATE_CUSTOMER_DATA:null,UPDATE_CUSTOMER_ADMIN_NOTES_DATA:null,UPDATE_MORE_SHARED_PHOTOS:null,UPDATED_CUSTOMER_TAG_NAMES:null,FETCH_CUSTOMER_DATA:null,FETCH_CUSTOMER_ACTIONS_DATA:null,FETCH_MORE_SHARED_PHOTOS:null,RESET:null,RESET_UI:null,QUERY_TAGS:null,SET_TAG:null,UNSET_TAG:null,SHOW_MORE_HISTORY:null,SHOW_MORE_NOTES:null,SHOW_STORY_PREVIEW:null,HIDE_STORY_PREVIEW:null,TOGGLE_EDIT_NOTE_DIALOG:null,TOGGLE_DELETE_NOTE_DIALOG:null,TOGGLE_FULL_VIEW:null,ADD_NOTE:null,EDIT_NOTE:null,DELETE_NOTE:null,DRAFT_NOTE:null}),PayloadSources:b("keyMirror")({SERVER_ACTION:null,VIEW_ACTION:null}),ContextCardLocations:b("keyMirror")({HOVERCARD_LOCATION:null,INBOX_LOCATION:null})};e.exports=a}),null);
__d("PageCustomerDispatcher",["Dispatcher_DEPRECATED","PageCustomerConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("PageCustomerConstants").PayloadSources,i=[];g=babelHelpers.inherits(a,b("Dispatcher_DEPRECATED"));g&&g.prototype;a.prototype.$PageCustomerDispatcher1=function(){var a=i;i=[];a.forEach(function(a){return a()});i.length=0};a.prototype.addPostDispatchCallback=function(a){this.isDispatching()?i.push(a):a()};a.prototype.handleServerAction=function(a){this.addPostDispatchCallback(function(){var b={source:h.SERVER_ACTION,action:a};this.dispatch(b);this.$PageCustomerDispatcher1()}.bind(this))};a.prototype.handleViewAction=function(a){this.addPostDispatchCallback(function(){var b={source:h.VIEW_ACTION,action:a};this.dispatch(b);this.$PageCustomerDispatcher1()}.bind(this))};function a(){g.apply(this,arguments)}e.exports=new a()}),null);
__d("PagesAdminToolUIActionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CONTEXT_CARD_CLICK_ADD_NOTE:"context_card_click_add_note",CONTEXT_CARD_CLICK_CONFIRM_ADD_NOTE:"context_card_click_confirm_add_note",CONTEXT_CARD_CLICK_DELETE_NOTE:"context_card_click_delete_note",CONTEXT_CARD_CLICK_CONFIRM_DELETE_NOTE:"context_card_click_confirm_delete_note",CONTEXT_CARD_CLICK_HISTORY:"context_card_click_history",CONTEXT_CARD_CLICK_PROFILE_LINK:"context_card_click_profile_link",CONTEXT_CARD_CLICK_SHARED_MEDIA:"context_card_click_shared_media",CONTEXT_CARD_LOAD_MORE_SHARED_MEDIA:"context_card_load_more_shared_media",CONTEXT_CARD_LOAD_MORE_NOTES:"context_card_load_more_notes",CONTEXT_CARD_LOAD_MORE_HISTORY:"context_card_load_more_history",CONTEXT_CARD_CLICK_SET_CUSTOM_TAG:"context_card_click_set_custom_tag",CONTEXT_CARD_CLICK_UNSET_CUSTOM_TAG:"context_card_click_unset_custom_tag",TAG_MANAGEMENT_CLICK_DELETE_LINK:"tag_management_click_delete_link",TAG_MANAGEMENT_CLICK_CONFIRM_DELETE:"tag_management_click_confirm_delete",TAG_MANAGEMENT_CLICK_COLOR_SELECTOR:"tag_management_click_color_selector",TAG_MANAGEMENT_CLICK_CHANGE_COLOR:"tag_management_click_change_color",TAG_MANAGEMENT_CLICK_ADD_TAG:"tag_management_click_add_tag",TAG_MANAGEMENT_CLICK_MERGE_TAG:"tag_management_click_merge_tag",MESSAGE_INBOX_SWITCH_FOLDER:"message_inbox_switch_folder",MESSAGE_INBOX_TOGGLE_FILTER_PANEL:"message_inbox_toggle_filter_panel",MESSAGE_INBOX_CLICK_MANAGE_TAGS:"message_inbox_click_manage_tags",MESSAGE_INBOX_CLICK_ADD_SEARCH_TAGS:"message_inbox_click_add_search_tags",MESSAGE_INBOX_CLICK_REMOVE_SEARCH_TAGS:"message_inbox_click_remove_search_tags",MESSAGE_INBOX_CLICK_SEARCH_NAMES:"message_inbox_click_search_names",MESSAGE_INBOX_CLICK_SEARCH_MESSAGES:"message_inbox_click_search_messages",MESSAGE_INBOX_CLICK_AWAY_TOGGLE:"message_inbox_click_away_toggle",MESSAGE_INBOX_CLICK_THREAD_BLOCK:"message_inbox_click_thread_block",MESSAGE_INBOX_CLICK_SEND_MESSAGE:"message_inbox_click_send_message",MESSAGE_INBOX_CLICK_MENU_ACTION:"message_inbox_click_menu_action",HOVERCARD_CLICK_EXPAND_FULL_VIEW:"hovercard_click_expand_full_view",HOVERCARD_CLICK_SEND_MESSAGE:"hovercard_click_send_message",HOVERCARD_CLICK_SEE_CONVERSATION:"hovercard_click_see_conversation",HOVERCARD_CLICK_VIEW_PROFILE:"hovercard_click_view_profile"})}),null);
__d("PagesManagerCustomTagsActionType",["PagesManagerActionType","keyMirrorRecursive"],(function(a,b,c,d,e,f){a=b("keyMirrorRecursive")({FETCH:null,UPDATE:null,TOGGLE_MERGE_LABELS:null,TOGGLE_TAG_MANAGEMENT_DIALOG:null,CREATE:null,DELETE:null,EDIT_COLOR:null,MERGE:null},"CUSTOM_TAGS_");Object.assign(a,b("PagesManagerActionType"));e.exports=a}),null);
__d("PagesManagerCustomTagsAction",["PagesManagerCustomTagsActionType","PagesManagerDispatcher"],(function(a,b,c,d,e,f){__p&&__p();a={fetch:function(a){b("PagesManagerDispatcher").dispatch({pageID:a,type:b("PagesManagerCustomTagsActionType").FETCH})},toggleMergeLabelsSection:function(a,c){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerCustomTagsActionType").TOGGLE_MERGE_LABELS,pageID:a,show:c})},toggleManageTagsDialog:function(a,c){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerCustomTagsActionType").TOGGLE_TAG_MANAGEMENT_DIALOG,pageID:a,show:c})},updateCustomTagsData:function(a,c,d){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerCustomTagsActionType").UPDATE,pageID:a,customTags:c,hasTagListChanged:d})},createCustomTag:function(a,c,d){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerCustomTagsActionType").CREATE,pageID:a,tagName:c,color:d})},deleteCustomTag:function(a,c){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerCustomTagsActionType").DELETE,pageID:a,tagName:c})},editCustomTagColor:function(a,c,d){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerCustomTagsActionType").EDIT_COLOR,pageID:a,tagName:c,color:d})},mergeCustomTag:function(a,c,d){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerCustomTagsActionType").MERGE,pageID:a,tagName:c,oldTags:d})}};e.exports=a}),null);
__d("PagesManagerLogger",["FBLogger","PagesAdminToolUIActionType","PagesEventObserver","PagesEventType","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();c=b("immutable").Map;var g=c(b("PagesAdminToolUIActionType")).toArray();a.prototype.$1=function(a){if(g.indexOf(a)<0){b("FBLogger")("pages").mustfix("Invalid PagesAdminToolUIActionType: %s",a);return!1}return!0};a.prototype.$2=function(a,c,d,e){if(!this.$1(c))return;e=e||{};e.action_type=c;b("PagesEventObserver").notify(a,d,e)};a.prototype.logContextCardUIAction=function(a,c,d){this.$2(b("PagesEventType").PAGES_ADMIN_TOOL_CONTEXT_CARD_UI_ACTION,a,c,d)};a.prototype.logManageTagUIAction=function(a,c,d){this.$2(b("PagesEventType").PAGES_ADMIN_TOOL_MANAGE_TAG_UI_ACTION,a,c,d)};a.prototype.logMessageInboxUIAction=function(a,c,d){this.$2(b("PagesEventType").PAGES_ADMIN_TOOL_MESSAGE_INBOX_UI_ACTION,a,c,d)};a.prototype.logHovercardUIAction=function(a,c,d){this.$2(b("PagesEventType").PAGES_ADMIN_TOOL_HOVERCARD_UI_ACTION,a,c,d)};function a(){}e.exports=new a()}),null);
__d("PageCustomerActions",["cx","ActorURI","MercuryAttachmentType","MercuryAttachmentViewer","MercuryIDs","MercuryPageThreadActions","MessagesViewerSetID","PageCustomerConstants","PageCustomerDispatcher","PagesAdminToolUIActionType","PagesManagerCustomTagsAction","PagesManagerLogger","URI","Vector"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("PageCustomerConstants").ActionTypes,i="/ajax/messaging/attachments/sharedphotos.php";a={toggleContextCardDialog:function(a,c){b("PageCustomerDispatcher").handleViewAction({actionType:h.TOGGLE_FULL_VIEW,pageID:a,userID:c})},resetData:function(a){b("PageCustomerDispatcher").handleViewAction({actionType:h.RESET,pageID:a})},fetchCustomerData:function(a,c){b("PageCustomerDispatcher").handleViewAction({actionType:h.FETCH_CUSTOMER_DATA,pageID:a,userID:c})},fetchCustomerActionsData:function(a,c){b("PageCustomerDispatcher").handleViewAction({actionType:h.FETCH_CUSTOMER_ACTIONS_DATA,pageID:a,userID:c})},fetchMoreSharedPhotos:function(a,c,d){b("PageCustomerDispatcher").handleViewAction({actionType:h.FETCH_MORE_SHARED_PHOTOS,pageID:a,userID:c,shouldLoadAllImages:d})},resetUI:function(a,c){b("PageCustomerDispatcher").handleViewAction({actionType:h.RESET_UI,pageID:a,userID:c})},clickPhotoFullView:function(a,c,d){switch(d.media_type){case b("MercuryAttachmentType").VIDEO:var e=d.dim.split(",");b("MercuryAttachmentViewer").renderVideo({disableForward:!0,rootClassName:"_1j1h",videoID:d.fbid,videoSize:new(b("Vector"))(e[0],e[1]),videoURI:d.src_uri,pageID:a});break;case b("MercuryAttachmentType").ANIMATED_IMAGE:case b("MercuryAttachmentType").PHOTO:e=b("ActorURI").create(new(b("URI"))(i).setQueryData({thread_id:c,image_id:d.fbid}),a);b("MercuryAttachmentViewer").bootstrapWithConfig({actorid:a,dimensions:d.dim,disableForward:!0,disablePaging:!0,endpoint:e,fbid:d.fbid,setID:b("MessagesViewerSetID").MESSAGES_VIEW_ALL_IN_THREAD,snapToPhoto:!0,src:d.src_uri});break}b("PagesManagerLogger").logContextCardUIAction(b("PagesAdminToolUIActionType").CONTEXT_CARD_CLICK_SHARED_MEDIA,a,{fbid:d.fbid,media_type:d.media_type})},clickProfileLink:function(a,c){b("PagesManagerLogger").logContextCardUIAction(b("PagesAdminToolUIActionType").CONTEXT_CARD_CLICK_PROFILE_LINK,a)},queryTags:function(a,c,d){b("PageCustomerDispatcher").handleViewAction({actionType:h.QUERY_TAGS,pageID:a,userID:c,query:d})},setTag:function(a,c,d){b("PageCustomerDispatcher").handleViewAction({actionType:h.SET_TAG,pageID:a,userID:c,tagName:d})},unsetTag:function(a,c,d){b("PageCustomerDispatcher").handleViewAction({actionType:h.UNSET_TAG,pageID:a,userID:c,tagName:d})},unflag:function(a,c){b("MercuryPageThreadActions").getForFBID(a).removeFlag(b("MercuryIDs").getThreadIDFromUserID(c),"context_card")},updateCustomTagsData:function(a,c,d){b("PagesManagerCustomTagsAction").updateCustomTagsData(a,c,d)},showMoreHistory:function(a,c){b("PageCustomerDispatcher").handleViewAction({actionType:h.SHOW_MORE_HISTORY,pageID:a,userID:c})},showMoreNotes:function(a,c){b("PageCustomerDispatcher").handleViewAction({actionType:h.SHOW_MORE_NOTES,pageID:a,userID:c})},showStoryPreview:function(a,c,d){b("PageCustomerDispatcher").handleViewAction({actionType:h.SHOW_STORY_PREVIEW,pageID:a,userID:c,storyToken:d})},hideStoryPreview:function(a,c){b("PageCustomerDispatcher").handleViewAction({actionType:h.HIDE_STORY_PREVIEW,pageID:a,userID:c})},toggleEditNoteDialog:function(a,c,d,e){b("PageCustomerDispatcher").handleViewAction({actionType:h.TOGGLE_EDIT_NOTE_DIALOG,pageID:a,userID:c,noteID:e,showEditNoteDialog:d})},toggleDeleteNoteDialog:function(a,c,d,e){b("PageCustomerDispatcher").handleViewAction({actionType:h.TOGGLE_DELETE_NOTE_DIALOG,pageID:a,userID:c,noteID:d,showDeleteNoteDialog:e})},addNote:function(a,c,d){b("PageCustomerDispatcher").handleViewAction({actionType:h.ADD_NOTE,pageID:a,userID:c,noteBody:d})},editNote:function(a,c,d,e){b("PageCustomerDispatcher").handleViewAction({actionType:h.EDIT_NOTE,pageID:a,userID:c,noteID:d,noteBody:e})},deleteNote:function(a,c,d){b("PageCustomerDispatcher").handleViewAction({actionType:h.DELETE_NOTE,pageID:a,userID:c,noteID:d})},draftNote:function(a,c,d){b("PageCustomerDispatcher").handleViewAction({actionType:h.DRAFT_NOTE,pageID:a,userID:c,noteDraft:d})}};e.exports=a}),null);
__d("PagesManagerMessagingActionType",["PagesManagerActionType","keyMirrorRecursive"],(function(a,b,c,d,e,f){a=b("keyMirrorRecursive")({THREAD_LEVEL:{READ_STATUS:"",ARCHIVE_STATUS:"",SPAM_STATUS:"",UPDATE_THREAD:""},SET_SCROLL_HEIGHT:null,SET_APPOINTMENT_BANNER_HEIGHT:null,AWAY_STATE:{UPDATE:null,FETCH:null,SET:null},SET_IS_CONTEXT_CARD_HIDDEN:null,MESSAGE_SEARCH:{NAME_SEARCH_UPDATE:null,SNIPPET_SEARCH_UPDATE:null,LOAD_MORE_NAME_RESULT:null,LOAD_MORE_SNIPPET_RESULT:null},HOT_LIKE:{END:null,START:null},BAN:{RESET:null,UPDATE:null},CLASSIFIER:{INITIALIZE_STORE:null,CHECK_FOR_INTENT:null,NOTIFY_INTENT_CLASSIFIED:null,THREAD_INTENT_UPDATED:null,VERIFY_INTENT:null}});Object.assign(a,b("PagesManagerActionType"));e.exports=a}),null);
__d("PagesMessagingSearchMode",["keyMirrorRecursive"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirrorRecursive")({ALL:"",NAME_SEARCH:"",KEYWORD_SEARCH:"",MESSAGE_SEARCH:"",NONE:""});e.exports=a}),null);
__d("PagesManagerMessagingThreadlistAction",["MercuryThreadlistConstants","PageCommSearchType","PagesAdminToolUIActionType","PagesManagerDispatcher","PagesManagerLogger","PagesManagerMessagingActionType","PagesMessagingSearchMode"],(function(a,b,c,d,e,f){__p&&__p();var g={initThreadlist:function(a){this.fetchThreadlist(a,0,b("MercuryThreadlistConstants").WEBMESSENGER_THREAD_COUNT)},fetchThreadlist:function(a,c,d){b("PagesManagerDispatcher").dispatch({offset:c,limit:d,pageID:a,type:b("PagesManagerMessagingActionType").LIST.FETCH})},updateThreadlist:function(a){b("PagesManagerDispatcher").dispatch({pageID:a,type:b("PagesManagerMessagingActionType").LIST.UPDATED})},updateThreadlistWithDelay:function(a,c){setTimeout(function(){b("PagesManagerDispatcher").dispatch({pageID:a,type:b("PagesManagerMessagingActionType").LIST.UPDATED})},c)},changeSearchTerm:function(a,c,d,e){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerMessagingActionType").SEARCH.CHANGE_SEARCH_TERM,searchTerm:c,pageID:a,activeFolder:d,searchMode:e})},changeIsSearchingNameStatus:function(a){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerMessagingActionType").MESSAGE_SEARCH.NAME_SEARCH_UPDATE,isSearching:a})},changeIsSearchingSnippetStatus:function(a){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerMessagingActionType").MESSAGE_SEARCH.SNIPPET_SEARCH_UPDATE,isSearching:a})},loadMoreNameResult:function(a,c,d){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerMessagingActionType").MESSAGE_SEARCH.LOAD_MORE_NAME_RESULT,searchTerm:c,pageID:a,activeFolder:d})},loadMoreSnippetResult:function(a,c,d){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerMessagingActionType").MESSAGE_SEARCH.LOAD_MORE_SNIPPET_RESULT,searchTerm:c,pageID:a,activeFolder:d})},resetSearch:function(a){g.changeSearchTerm(a,"","",b("PagesMessagingSearchMode").NONE)},addSearchCustomTag:function(a,c,d){b("PagesManagerLogger").logMessageInboxUIAction(b("PagesAdminToolUIActionType").MESSAGE_INBOX_CLICK_ADD_SEARCH_TAGS,a,{tag_name:c,position:d}),b("PagesManagerDispatcher").dispatch({type:b("PagesManagerMessagingActionType").SEARCH.ADD_SEARCH_CUSTOM_TAG,pageID:a,tagName:c}),b("PagesManagerDispatcher").dispatch({searchType:b("PageCommSearchType").LABEL,type:b("PagesManagerMessagingActionType").SEARCH.LABEL})},removeSearchCustomTag:function(a,c,d){b("PagesManagerLogger").logMessageInboxUIAction(b("PagesAdminToolUIActionType").MESSAGE_INBOX_CLICK_REMOVE_SEARCH_TAGS,a,{tag_name:c,position:d}),b("PagesManagerDispatcher").dispatch({type:b("PagesManagerMessagingActionType").SEARCH.REMOVE_SEARCH_CUSTOM_TAG,pageID:a,tagName:c}),b("PagesManagerDispatcher").dispatch({searchType:b("PageCommSearchType").LABEL,type:b("PagesManagerMessagingActionType").SEARCH.LABEL})},searchNameResult:function(a,c,d){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerMessagingActionType").MESSAGE_SEARCH.CHANGE_NAME_SEARCH_TERM,searchTerm:c,pageID:a,activeFolder:d})},searchMessageResult:function(a,c,d){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerMessagingActionType").MESSAGE_SEARCH.CHANGE_MESSAGE_SEARCH_TERM,searchTerm:c,pageID:a,activeFolder:d})}};e.exports=g}),null);
__d("PresenceAccountIntagramDialog",["cx","CSS","DialogX","LayerDestroyOnHide","LayerFadeOnHide","LayerFadeOnShow","LayerHideOnEscape","LayerRefocusOnHide"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=485;c=babelHelpers.inherits(a,b("DialogX"));h=c&&c.prototype;function a(a){h.constructor.call(this,{width:i,xui:!0,addedBehaviors:[b("LayerDestroyOnHide"),b("LayerFadeOnShow"),b("LayerFadeOnHide"),b("LayerHideOnEscape"),b("LayerRefocusOnHide")]},a)}a.prototype.getContentRoot=function(){var a=h.getContentRoot.call(this);b("CSS").addClass(a,"_3acm");return a};e.exports=a}),null);
__d("XPresenceAccountInstagramAuthenticateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/presence/instagram/authenticate/",{})}),null);
__d("XPresenceAccountInstagramConnectionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/presence/instagram/connect/",{})}),null);
__d("XPresenceAccountInstagramCreateAndConnectController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/presence/instagram/create_connect/",{})}),null);
__d("PresenceAccountInstagramAuthenticator",["fbt","invariant","AsyncRequest","FacebookAppIDs","PresenceAccountInstagramAuthView.react","PresenceAccountIntagramDialog","React","XPresenceAccountInstagramAuthenticateController","XPresenceAccountInstagramConnectionController","XPresenceAccountInstagramCreateAndConnectController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();i.authenticateWithCredential=function(a,c,d,e,f){var g=b("XPresenceAccountInstagramConnectionController").getURIBuilder().getURI();i.$7(g,a,{username:c,password:d},e,f)};i.authenticateAccountWithCredential=function(a,c,d,e,f){var g=b("XPresenceAccountInstagramAuthenticateController").getURIBuilder().getURI();i.$7(g,a,{username:c,password:d},e,f)};i.authenticateWithAccountCreation=function(a,c,d,e,f,g){var h=b("XPresenceAccountInstagramCreateAndConnectController").getURIBuilder().getURI();i.$7(h,a,{username:c,email:d,phone_number:e},f,g)};i.$7=function(a,c,d,e,f){new(b("AsyncRequest"))().setURI(a).setMethod("POST").setData(Object.assign({owner_id:c,presence_owner_id:c,app_id:b("FacebookAppIDs").FBPAGES},d)).setHandler(function(a){a=a.payload;a&&a.ig_error_message?f(a.ig_error_message):e(a)}).setErrorHandler(function(a){return f(i.getDefaultErrorMessage())}).send()};i.getDefaultErrorMessage=function(){return g._("Sorry, an unknown error occurred. Please try again.")};function i(a,b){this.$1=a,this.$2=!1,this.$3=b}i.prototype.authenticate=function(a,b){this.$2&&h(0,1542),this.$5=a,this.$6=b,this.$8()};i.prototype.verifyAccess=function(a,b){this.$2&&h(0,1542),this.$5=a,this.$6=b,this.$9()};i.prototype.$10=function(){this.$2&&h(0,1542),this.$2=!0,this.$4&&this.$4.hide()};i.prototype.$8=function(){var a=b("React").createElement(b("PresenceAccountInstagramAuthView.react"),{presenceOwnerID:this.$3,onConnected:function(a){this.$5&&this.$5(a),this.$10()}.bind(this),onClose:function(){this.$6&&this.$6("USER_CLOSE_DIALOG"),this.$10()}.bind(this),viewOptions:"signIn"});this.$4=new(b("PresenceAccountIntagramDialog"))(a);this.$4.show()};i.prototype.$9=function(){var a=b("React").createElement(b("PresenceAccountInstagramAuthView.react"),{presenceOwnerID:this.$3,onConnected:function(a){this.$5&&this.$5(a),this.$10()}.bind(this),onClose:function(){this.$6&&this.$6("USER_CLOSE_DIALOG"),this.$10()}.bind(this),viewOptions:"authenticate"});this.$4=new(b("PresenceAccountIntagramDialog"))(a);this.$4.show()};e.exports=i}),null);
__d("PresmaUsageEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LINK_ACCOUNT:"link_account",UNLINK_ACCOUNT:"unlink_account",IG_UPDATE_PROFILE_IMAGE:"ig_update_profile_image",IG_UPDATE_PROFILE_DATA:"ig_update_profile_data",IG_CONNECT_VIEW_LOADED:"ig_connect_view_loaded",IG_CONNECT_XOUT_CLICKED:"ig_connect_xout_clicked",IG_CONNECT_SEE_DETAILS_CLICKED:"ig_connect_see_details_clicked",IG_SETTING_VIEW_LOADED:"ig_setting_view_loaded",IG_CONNECT_AUTH_CLICKED:"ig_connect_auth_clicked",IG_CONNECT_LOGIN_CLICKED:"ig_connect_login_clicked",IG_CONNECT_SWITCH_TO_LOG_IN:"ig_connect_switch_to_log_in",IG_CONNECT_SWITCH_TO_SIGN_UP:"ig_connect_switch_to_sign_up",IG_CONNECT_SIGN_UP_CLICKED:"ig_connect_sign_up_clicked",IG_CONNECT_CONNECT_BUTTON_CLICKED:"ig_connect_connect_button_clicked",IG_CONNECT_DISCONNECT_BUTTON_CLICKED:"ig_connect_disconnect_button_clicked",IG_CONNECT_OAUTH_CONNECT_CLICKED:"ig_connect_oauth_connect_clicked",IG_CONNECT_OAUTH_WEBVIEW_CANCEL_CLICKED:"ig_connect_oauth_webview_cancel_clicked",MISSING_INSTAGRAM_USER_FOR_V2_ID:"missing_instagram_user_for_v2_id",MISSING_PAGE_FOR_INSTAGRAM_USER:"missing_page_for_instagram_user",ACCEPT_INVITATION:"accept_invitation",ADDED_ROLE:"added_role",ATTEMPT_ADDING_OR_INVITE_ROLE:"attempt_adding_or_invite_role",ATTEMPT_CANCELING_INVITATION:"attempt_canceling_invitation",ATTEMPT_CHANGING_ROLE:"attempt_changing_role",ATTEMPT_DELETING_ROLE:"attempt_deleting_role",CANCELED_INVITATION:"canceled_invitation",CHANGED_ROLE:"changed_role",DECLINE_INVITATION:"decline_invitation",DELETED_ROLE:"deleted_role",FAILED_ADDING_ROLE:"failed_adding_role",FAILED_CANCELING_INVITATION:"failed_canceling_invitation",FAILED_CHANGING_ROLE:"failed_changing_role",FAILED_DELETING_ROLE:"failed_delete_role",FAILED_PERMISSION_CHECK:"failed_permission_check",FAILED_REMOVING_PROXY:"failed_removing_proxy",FAILED_TRANSFERING_SCHEULD_POSTS:"failed_transfering_scheuld_posts",INVITATION_SENT:"invitation_sent",FAILED_ADDING_SPECIAL_ROLE:"failed_adding_special_role",ACCEPT_PROXY_REQUEST:"accept_proxy_request",REJECT_PROXY_REQUEST:"reject_proxy_request",ACCEPT_BUSINESS_REQUEST:"accept_business_request",REJECT_BUSINESS_REQUEST:"recject_business_request",WA_ACCOUNT_CREATION_CALLBACK:"account_creation_callback",WA_REQUEST_WA_REGISTRATION_CODE:"wa_request_wa_registration_code",BUSINESS_PAGE_IG_MISMATCH:"business_page_ig_mismatch",ROLLBACK_BUSINESS_MIGRATION:"rollback_business_migration"})}),null);
__d("PresenceAccountInstagramAuthView.react",["cx","fbt","ix","AbstractButton.react","AbstractTextInput.react","Image.react","Keys","Link.react","PresmaUsageEvents","PresmaUsageTypedLogger","React","ShimButton.react","XUISpinner.react","fbglyph","joinClasses","PresenceAccountInstagramAuthenticator"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a){__p&&__p();j.constructor.call(this,a),this.$7=function(){new(b("PresmaUsageTypedLogger"))().setUsageEvent(b("PresmaUsageEvents").IG_CONNECT_XOUT_CLICKED).setBusinessID(this.props.presenceOwnerID).log(),this.props.onClose()}.bind(this),this.$8=function(a){var c=this.$9();a.keyCode===b("Keys").RETURN&&!c.isButtonDisabled()&&(c.buttonAction(),new(b("PresmaUsageTypedLogger"))().setUsageEvent(b("PresmaUsageEvents").IG_CONNECT_LOGIN_CLICKED).setBusinessID(this.props.presenceOwnerID).log())}.bind(this),this.$1={signIn:{subtitle:h._("Log in to Instagram so you can connect with more customers right from Facebook"),buttonLabel:h._("Log In"),buttonAction:function(){new(b("PresmaUsageTypedLogger"))().setUsageEvent(b("PresmaUsageEvents").IG_CONNECT_LOGIN_CLICKED).setBusinessID(this.props.presenceOwnerID).log(),this.$2()}.bind(this),isButtonDisabled:function(){return!this.state.username||!this.state.password}.bind(this),renderForm:function(){return this.$3()}.bind(this),promptSectionConfig:{prompt:h._("Don't have an account?"),actionLabel:h._("Sign up"),action:function(){return this.setState({errorMessage:null,mode:"signUp"})}.bind(this)}},signUp:{subtitle:h._("Sign up to see photos and videos from your friends"),buttonLabel:h._("Create Account"),buttonAction:function(){new(b("PresmaUsageTypedLogger"))().setUsageEvent(b("PresmaUsageEvents").IG_CONNECT_SIGN_UP_CLICKED).setBusinessID(this.props.presenceOwnerID).log(),this.$4()}.bind(this),isButtonDisabled:function(){return!this.state.username||!this.state.email||this.state.email!==this.state.reEnterEmail}.bind(this),renderForm:function(){return this.$5()}.bind(this),promptSectionConfig:{prompt:h._("Already have an account?"),actionLabel:h._("Sign in"),action:function(){return this.setState({errorMessage:null,mode:"signIn"})}.bind(this)}},authenticate:{subtitle:h._("You're about to change the instagram username. Please enter your original username and password to verify your identity."),buttonLabel:h._("Verify"),buttonAction:function(){new(b("PresmaUsageTypedLogger"))().setUsageEvent(b("PresmaUsageEvents").IG_CONNECT_AUTH_CLICKED).setBusinessID(this.props.presenceOwnerID).log(),this.$6()}.bind(this),isButtonDisabled:function(){return!this.state.username||!this.state.password}.bind(this),renderForm:function(){return this.$3()}.bind(this),PromptRenderConfig:null}},this.state={username:"",password:"",email:"",reEnterEmail:"",phoneNumber:"",isRequesting:!1,errorMessage:null,mode:this.props.viewOptions}}a.prototype.$9=function(){if(this.state.mode==="authenticate")return this.$1.authenticate;else if(this.state.mode==="signUp")return this.$1.signUp;else return this.$1.signIn};a.prototype.componentDidMount=function(){new(b("PresmaUsageTypedLogger"))().setUsageEvent(b("PresmaUsageEvents").IG_SETTING_VIEW_LOADED).setBusinessID(this.props.presenceOwnerID).log()};a.prototype.render=function(){var a=this.$9();a=this.state.isRequesting?this.$10():this.$11(a);return b("React").createElement("div",{className:b("joinClasses")(this.props.className,"_2k3s")},this.$12(),a)};a.prototype.$13=function(a){return function(b){this.$14(a,b.target.value)}.bind(this)};a.prototype.$14=function(a,b){var c={};c[a]=b;this.setState(c)};a.prototype.$12=function(){return!this.state.errorMessage?null:b("React").createElement("div",{className:"_53n- _4auv _4auw"},b("React").createElement(b("Image.react"),{src:i("114551")}),b("React").createElement("div",{className:"_3-9a"},this.state.errorMessage))};a.prototype.$10=function(){return b("React").createElement("div",{className:"_4aux _4auy"},b("React").createElement("div",{className:"_2k3t _2k3u"},b("React").createElement(b("Image.react"),{src:i("96615"),height:46,width:160}),b("React").createElement("div",{className:"_3-8y"},b("React").createElement(b("XUISpinner.react"),{className:"_4auz",size:"large",background:"dark"}))))};a.prototype.$15=function(){return b("React").createElement(b("ShimButton.react"),{className:"_2k3x"+(this.state.isRequesting?" hidden_elem":""),onClick:this.$7},b("React").createElement(b("Image.react"),{src:i("114708")}))};a.prototype.$11=function(a){return b("React").createElement("div",{className:"_4au- _4auv _4auy _2k3t"},this.$15(),b("React").createElement(b("Image.react"),{src:i("96615"),height:46,width:160}),b("React").createElement("div",{className:"_2k3y"},a.subtitle),b("React").createElement("div",{className:"_2k3z"}),a.renderForm(),b("React").createElement(b("AbstractButton.react"),{className:"_2k43",onClick:a.buttonAction,label:a.buttonLabel,disabled:a.isButtonDisabled()}),this.$16(a.promptSectionConfig))};a.prototype.$5=function(){return b("React").createElement("div",null,b("React").createElement(b("AbstractTextInput.react"),{className:"_2k3- _4au_",placeholder:h._("username"),value:this.state.username,onChange:this.$13("username")}),b("React").createElement(b("AbstractTextInput.react"),{className:"_2k3- _4au_",placeholder:h._("email"),value:this.state.email,onChange:this.$13("email")}),b("React").createElement(b("AbstractTextInput.react"),{className:"_2k3- _4au_",placeholder:h._("re-enter email"),value:this.state.reEnterEmail,onChange:this.$13("reEnterEmail")}),b("React").createElement(b("AbstractTextInput.react"),{className:"_2k3- _4au_",placeholder:h._("phone number (optional)"),value:this.state.phoneNumber,onChange:this.$13("phoneNumber")}))};a.prototype.$3=function(){return b("React").createElement("div",null,b("React").createElement(b("AbstractTextInput.react"),{className:"_2k3- _4au_",placeholder:h._("Username"),value:this.state.username,onChange:this.$13("username"),onKeyDown:this.$8}),b("React").createElement(b("AbstractTextInput.react"),{className:"_2k3-",type:"password",placeholder:h._("Password"),value:this.state.password,onChange:this.$13("password"),onKeyDown:this.$8}))};a.prototype.$16=function(a){return this.state.mode==="authenticate"?b("React").createElement("div",{className:"_4av0"}):b("React").createElement("div",{className:"_4av0"},b("React").createElement("span",null,a?a.prompt:null),b("React").createElement(b("Link.react"),{onClick:a?a.action:null},a?a.actionLabel:null))};a.prototype.$2=function(){this.setState({isRequesting:!0,errorMessage:null}),b("PresenceAccountInstagramAuthenticator").authenticateWithCredential(this.props.presenceOwnerID,this.state.username,this.state.password,function(a){this.props.onConnected(a),this.setState({isRequesting:!1})}.bind(this),function(a){this.setState({isRequesting:!1,errorMessage:a})}.bind(this))};a.prototype.$6=function(){this.setState({isRequesting:!0,errorMessage:null}),b("PresenceAccountInstagramAuthenticator").authenticateAccountWithCredential(this.props.presenceOwnerID,this.state.username,this.state.password,function(a){this.props.onConnected(a),this.setState({isRequesting:!1})}.bind(this),function(a){this.setState({isRequesting:!1,errorMessage:a})}.bind(this))};a.prototype.$4=function(){this.setState({isRequesting:!0,errorMessage:null}),b("PresenceAccountInstagramAuthenticator").authenticateWithAccountCreation(this.props.presenceOwnerID,this.state.username,this.state.email,this.state.phoneNumber,function(a){this.props.onConnected(a),this.setState({isRequesting:!1})}.bind(this),function(a){this.setState({isRequesting:!1,errorMessage:a})}.bind(this))};e.exports=a}),null);
__d("XPresenceAccountOAuthUpdateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/presence/account/oauth/update/",{})}),null);
__d("PresenceAccountOAuthAuthenticator",["invariant","AsyncRequest","EventListener","PopupWindow","URI","XPresenceAccountOAuthUpdateController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a.informOAuthResult=function(a,b){a.postMessage({oAuthResult:b},window.location.origin)};a.extractResultFromOAuthHash=function(){var a=window.location.hash.substr(1),b=/([^&=]+)=([^&]*)/g,c={},d=null;while(d=b.exec(a))c[decodeURIComponent(d[1])]=decodeURIComponent(d[2]);if(c.error)return{succeeded:!1,error:c.error,payload:null};else return{succeeded:!0,error:null,payload:c}};function a(a,b,c,d,e){this.$1=a,this.$3=c,this.$5=!1,this.$6=b,this.$10=d,this.$11=e}a.prototype.authenticate=function(a,c){__p&&__p();this.$5&&g(0,1542);this.$2&&g(0,1543);this.$8=a;this.$7=c;a=new(b("URI"))("/presence/oauth/callback").setProtocol("https").setDomain(this.$1.location.hostname);c=new(b("URI"))(this.$3.url).addQueryData(this.$6).addQueryData("redirect_uri",a.toString()).toString();this.$9=b("PopupWindow").open(c,this.$3.height,this.$3.width);this.$2=b("EventListener").listen(this.$1,"message",function(event){return this.$12(event)}.bind(this));this.$4=b("EventListener").listen(this.$9,"beforeunload",function(event){this.$7&&this.$7("DIALOG_CLOSED"),this.$13()}.bind(this))};a.prototype.$12=function(event){__p&&__p();if(event.origin!==this.$1.location.origin||!event.data.oAuthResult)return;if(event.data.oAuthResult.succeeded){var a=event.data.oAuthResult.payload;a||g(0,1544);var c=b("XPresenceAccountOAuthUpdateController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setMethod("POST").setData({presence_owner_id:this.$10,presence_account_type:this.$11,payload:JSON.stringify(a)}).setHandler(function(a){this.$8&&this.$8(a.payload),this.$13()}.bind(this)).setErrorHandler(function(a){this.$7&&this.$7("UPDATE_ACCOUNT_FAILED"),this.$13()}.bind(this)).send()}else this.$7&&this.$7(event.data.error),this.$13()};a.prototype.$13=function(){this.$5&&g(0,1542),this.$2&&this.$2.remove(),this.$2=null,this.$4&&this.$4.remove&&this.$4.remove(),this.$4=null,this.$9&&this.$9.close(),this.$9=null,this.$5=!0};e.exports=a}),null);
__d("PresenceAccountType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FACEBOOK_PAGE:"page",INSTAGRAM:"instagram",GOOGLE:"google"})}),null);
__d("XPresenceAccountDisconnectController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/presence/account/disconnect/",{})}),null);
__d("XPresenceAccountPayloadFetchController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/presence/account/payload/fetch/",{})}),null);
__d("PresenceAccountUtilities",["invariant","AsyncRequest","FacebookAppIDs","PresenceAccountInstagramAuthenticator","PresenceAccountOAuthAuthenticator","PresenceAccountType","XPresenceAccountDisconnectController","XPresenceAccountPayloadFetchController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={getAuthPayloadAsync:function(a,c,d,e){var f=b("XPresenceAccountPayloadFetchController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(f).setMethod("POST").setData({owner_id:a,presence_account_type:c}).setHandler(function(b){b.payload&&b.payload.authContext||g(0,4304),!b.payload.accountPayload&&d?h.connectToAccountOfType(a,c,b.payload.authContext,e):e(b.payload.accountPayload,null)}).setErrorHandler(function(){e(null,"ACCOUNT_PAYLOAD_FETCH_ERROR")}).send()},connectToAccountOfType:function(a,c,d,e){__p&&__p();switch(c){case b("PresenceAccountType").GOOGLE:new(b("PresenceAccountOAuthAuthenticator"))(window,d.oAuthParams,d.dialogParams,a,c).authenticate(function(a){return e(a,null)},function(a){return e(null,a)});return;case b("PresenceAccountType").INSTAGRAM:new(b("PresenceAccountInstagramAuthenticator"))(window,a).authenticate(function(a){return e(a,null)},function(a){return e(null,a)});return;default:throw new Error("Unsupported account type: "+c)}},disconnectAccountOfType:function(a,c,d){var e=b("XPresenceAccountDisconnectController").getURIBuilder().getURI(),f=null;c==b("PresenceAccountType").INSTAGRAM&&(f=b("FacebookAppIDs").FBPAGES);c&&new(b("AsyncRequest"))().setURI(e).setMethod("POST").setData({owner_id:a,presence_account_type:c,app_id:f}).setHandler(function(a){d(a.payload,null)}).setErrorHandler(function(){d(null,"DISCONNECT_FAILURE")}).send()}};e.exports=h}),null);
__d("WitActions",["Reflux"],(function(a,b,c,d,e,f){__p&&__p();a={};a.gotMe=b("Reflux").createAction({sync:!0});a.gotInstance=b("Reflux").createAction({sync:!0});a.gotStatus=b("Reflux").createAction({sync:!0});a.gotWisps=b("Reflux").createAction({sync:!0});a.gotPartialWisps=b("Reflux").createAction({sync:!0});a.removedWisps=b("Reflux").createAction();a.gotKeyboardHandlers=b("Reflux").createAction();a.removedKeyboardHandlers=b("Reflux").createAction();a.pending=b("Reflux").createAction({sync:!0});a.eval=b("Reflux").createAction();a.needReason=b("Reflux").createAction();a.gotLanguages=b("Reflux").createAction();e.exports=a}),null);
__d("WitConfig",["URI","WitDynamicConfig"],(function(a,b,c,d,e,f){__p&&__p();var g="witcfg";function h(){try{return JSON.parse(localStorage.getItem(g)||"{}")}catch(a){}return null}function i(a){return Object.keys(a).filter(function(a){return a.indexOf(g)>-1}).reduce(function(b,c){b[c.replace(g,"")]=a[c];return b},{})}var j=function(a){localStorage.setItem(g,JSON.stringify(babelHelpers["extends"]({},h(),a)))},k=function(a){a=a.replace("www.","");return a.indexOf(".sb")>-1?a.split(".sb")[0]:null};function l(a){var b;b=!1;a=a.getDomain();var c=k(a);c=c?["api."+c+".sb.facebook.com:8443","graph."+c+".sb.wit.ai","/github_authorize_url?sb="+c]:["api.wit.ai","graph.wit.ai","/github_authorize_url"];var d=c[0],e=c[1];c=c[2];return babelHelpers["extends"]({witDomain:a,apiDomain:d,graphApiDomain:e,githubAuthorizePath:c,isDev:b},h())}function a(a){__p&&__p();j(i(a.getQueryData()));a=l(a);var c=a.witDomain,d=a.apiDomain,e=a.graphApiDomain,f=a.githubAuthorizePath,g=a.isDev,h={witDomain:c,wit_base_url:"https://"+c,wit_url:function(a){return h.wit_base_url+a},api_base_url:"https://"+d,api_url:function(a){return h.api_base_url+a},graph_api_base_url:"https://"+e,graph_api_url:function(a){return h.graph_api_base_url+a},migrated_api_url:function(a){return g?h.graph_api_url(a):h.api_url(a)},staging_api_url:function(a,c){return b("WitDynamicConfig").GRAPH_ENDPOINTS[a]?h.graph_api_url(c):h.api_url(c)},doc_base_url:"https://"+c,doc_url:function(a){return h.doc_base_url+a},github_authorize_url:function(){return h.api_url(f)},isDev:g};return h}e.exports=a(new(b("URI"))(window.location.href))}),null);
__d("WitConstants",[],(function(a,b,c,d,e,f){e.exports={ADD_ENTITY_INPUT:"ADD_ENTITY_INPUT",BOT_EXECUTES_BUTTON:"BOT_EXECUTES_BUTTON",BOT_EXECUTES_CARD:"BOT_EXECUTES_CARD",BOT_SAYS_BUTTON:"BOT_SAYS_BUTTON",BOT_SAYS_CARD:"BOT_SAYS_CARD",BOT_SAYS_VARIABLE_BUTTON:"BOT_SAYS_VARIABLE_BUTTON",COND_OPERATION_CARD:"COND_OPERATION_CARD",CREATOR_ROLE:"creator",DELETE:"DELETE",ENTITY_STYLE:"ENTITY_STYLE",JUMP_BUTTON:"JUMP_BUTTON",JUMP_CARD:"JUMP_CARD",SAVE:"SAVE",SAVE_FAIL:"SAVE_FAIL",SAVE_POSSIBLE:"SAVE_POSSIBLE",SAVE_PROGRESS:"SAVE_PROGRESS",SAVE_SUCCESS:"SAVE_SUCCESS",STATUS_CHECKING:"STATUS_CHECKING",STATUS_DIRTY:"STATUS_DIRTY",STATUS_FAIL:"STATUS_FAIL",STATUS_PASS:"STATUS_PASS",SUGGESTED_ENTITY_STYLE:"SUGGESTED_ENTITY_STYLE",TAGGED_EDITOR:"TAGGED_EDITOR",TEMP_ENTITY_STYLE:"TEMP_ENTITY_STYLE",USER_SAYS_BUTTON_DISABLED:"USER_SAYS_BUTTON_DISABLED",USER_SAYS_BUTTON_ENABLED:"USER_SAYS_BUTTON_ENABLED",WISP_FREE_TEXT:"free-text",WISP_KEYWORDS:"keywords",WISP_TRAIT:"trait",BNLP_REASON:"__wit_bnlp"}}),null);
__d("WitLog",["AsyncResponse","FBLogger"],(function(a,b,c,d,e,f){__p&&__p();a=localStorage.getItem("wit_debug");c=function(){};d=function(){var a;return(a=window.console).log.apply(a,arguments)};var g=function(a){if(!a)return null;else if(a instanceof Error)return a;else if(a instanceof b("AsyncResponse"))return a.toError();else try{return new Error(a.responseJSON.code)}catch(a){return null}};f=function(a,c){var d;for(var e=arguments.length,f=new Array(e>2?e-2:0),h=2;h<e;h++)f[h-2]=arguments[h];(d=window.console).error.apply(d,[a,c].concat(f));var i=b("FBLogger")("wit_console_ui"),j=g(c);j&&i.catching(j);i.mustfix(a)};var h=function(a,c){var d;for(var e=arguments.length,f=new Array(e>2?e-2:0),h=2;h<e;h++)f[h-2]=arguments[h];(d=window.console).warn.apply(d,[a,c].concat(f));var i=b("FBLogger")("wit_console_ui"),j=g(c);j&&i.catching(j);i.warn(a)};d=a?d:c;a=!!a&&a==="debug"?d:c;d.debug=a;d.error=f;d.warn=h;e.exports=d}),null);
__d("WitModal.react",["React","ReactDOM","ShimButton.react"],(function(a,b,c,d,e,f){__p&&__p();var g,h,i=window.$;g=babelHelpers.inherits(j,b("React").Component);g&&g.prototype;j.prototype.show=function(){"use strict";return this.modal("show")};j.prototype.hide=function(){"use strict";return this.modal("hide")};j.prototype.modal=function(a){"use strict";return i(b("ReactDOM").findDOMNode(this)).modal(a)};j.prototype.componentDidMount=function(){"use strict";this.modal(this.props.opts),this.props.onShown&&i(b("ReactDOM").findDOMNode(this)).on("shown.bs.modal",this.props.onShown)};j.prototype.componentWillUnmount=function(){"use strict";this.modal("hide")};j.prototype.render=function(){"use strict";var a=[];this.props.onCancel&&a.push(b("React").createElement(b("ShimButton.react"),{className:"btn btn-sm btn-primary cancel",form:"link",key:"cancel",onClick:this.props.onCancel},this.props.cancel_label));this.props.onOK&&a.push(b("React").createElement(b("ShimButton.react"),{className:"btn btn-sm btn-primary save",form:"link",key:"request",onClick:this.props.onOK},this.props.okLabel));return b("React").createElement("div",{className:"modal "+this.props.animateClass},b("React").createElement("div",{className:"modal-dialog"},b("React").createElement("div",{className:"modal-content"},this.props.header?b("React").createElement("div",{key:"h",className:"modal-header"},b("React").createElement("h4",null,this.props.header)):null,b("React").createElement("div",{key:"b",className:"modal-body"},b("React").createElement("div",{key:"x"},this.props.body)),this.props.btns||a.length>0?b("React").createElement("div",{key:"f",className:"modal-footer"},(this.props.btns||[]).concat(a)):null)))};function j(){"use strict";g.apply(this,arguments)}j.displayName="Modal";j.defaultProps={animateClass:"fade fail"};c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.handleOk=function(){this.props.onOk();return this.hideModal()}.bind(this),this.handleCancel=function(){this.props.onCancel();return this.hideModal()}.bind(this),b}a.prototype.componentDidMount=function(){"use strict";return this.modalDiv().on("hide.bs.modal",this.props.onHide)};a.prototype.modalDiv=function(){"use strict";return i(b("ReactDOM").findDOMNode(this.refs.modal))};a.prototype.hideModal=function(){"use strict";return this.modalDiv().modal("hide")};a.prototype.renderHeader=function(){"use strict";return b("React").createElement("h4",{key:"h",className:"conf-header"},"Confirm",b("React").createElement("button",{onClick:this.handleCancel,className:"btn btn-sm pull-right"},b("React").createElement("i",{className:"fa fa-times"})))};a.prototype.renderMsg=function(){"use strict";return b("React").createElement("p",{key:"m",className:"conf-msg"},this.props.msg)};a.prototype.renderOpts=function(){"use strict";return b("React").createElement("div",{key:"o",className:"conf-opts"},b("React").createElement("button",{ref:"ok",key:"y",className:"btn conf-btn conf-ok btn-danger",onClick:this.handleOk},b("React").createElement("i",{className:"fa fa-check"})),b("React").createElement("button",{key:"n",className:"btn conf-btn conf-cancel cancel",onClick:this.handleCancel},b("React").createElement("i",{className:"fa fa-times"})))};a.prototype.renderBody=function(){"use strict";return b("React").createElement("div",{key:"b",className:"conf-body"},this.renderMsg(),this.renderOpts())};a.prototype.renderInfo=function(){"use strict";return b("React").createElement("div",{key:"i",className:"conf-cont"},this.renderHeader(),this.renderBody())};a.prototype.render=function(){"use strict";var a={key:"m",ref:"modal",opts:{show:!0},animateClass:"",body:this.renderInfo()};return b("React").createElement("div",{className:"conf-modal"},b("React").createElement(j,a))};a.displayName="ConfirmModal";a.defaultProps={onOk:function(){},onCancel:function(){},onHide:function(){}};e.exports={ConfirmModal:a,Modal:j}}),null);
__d("WitHelpers",["Random","React","ReactDOM","ReactRouter-2.0.0","WitConfig","WitLog","WitModal.react","WitModel","WitUnderscore","immutable","performanceNow"],(function(a,b,c,d,e,f){__p&&__p();var g,h=window.$,i=b("immutable").List,j=b("immutable").Set,k=b("immutable").Iterable,l=b("ReactRouter-2.0.0").Link,m=b("WitModal.react").ConfirmModal;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){"use strict";var a=this.props,c=a.children;a=babelHelpers.objectWithoutProperties(a,["children"]);return b("React").createElement(l,babelHelpers["extends"]({activeClassName:"active"},a),c)};function a(){"use strict";g.apply(this,arguments)}var n=["webkit","ms","moz","Moz","o","O"];c=function(a,b){b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0;c<n.length;c++){var d=n[c];d=d+b;if(a[d])return d}return null};var o=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;window.rAF||(window.rAF=c(window,"requestAnimationFrame")||function(a){return setTimeout(a,16.7)});var p=[];for(var d=160;d<=280;d+=30)p.push(d);p=b("WitUnderscore").shuffle(p);var q=0,r={};e.exports={makeWitUsername:function(a){return a.toLowerCase().replace(/[^a-zA-Z0-9\-\_]/gi,"")},isMac:function(){return window.navigator&&window.navigator.platform.match(/Mac/)},get_color:function(a,c){var d;b("WitUnderscore").isNumber(c)||(c=90);if(d=r[a])return"hsla("+d+", 85%, "+c+"%, 0.5)";d=p[q];q=(q+1)%p.length;r[a]=d;return"hsla("+d+", 85%, "+c+"%, 0.5)"},throw_in_promise:function(a){return window.setTimeout(function(){throw a})},assert:function(a,c){var d=b("WitUnderscore").isFunction(a)?a():a;if(!d)throw new Error("Assertion failed: "+(c||a))},isUUID:function(a){return o.test(a)},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0;a=a==="x"?b:b&3|8;return a.toString(16)})},popup:function(a){__p&&__p();a||(a={});a.cb||(a.cb=function(){});var c=null,d=window.screenX||window.screenLeft,e=window.screenY||window.screenTop,f=window.outerWidth||document.documentElement.clientWidth,g=window.outerHeight||document.documentElement.clientHeight-22,h=a.under?1:939,i=a.under?1:609;d=d<0?window.screen.width+d:d;d=parseInt(d+(f-h)/2,10);f=parseInt(e+(g-i)/2.5,10);e="width="+h+",height="+i+",left="+d;e+=",top="+f+",scrollbars=1,location=1,toolbar=0";g=function d(event){b("WitLog")("> Received message",event);if(a.origin&&event.origin!==a.origin){b("WitLog")("> Different origin",event.origin);return}window.removeEventListener("message",d,!1);return a.cb(event.data,c)};b("WitLog")("> Listening for message");h=/MSIE/i.test(window.navigator&&window.navigator.userAgent);h?(document.domain=b("WitConfig").wit_domain,window.wit_callback=function(b){b=JSON.parse(b);return a.cb(b,c)}):window.addEventListener("message",g,!1);c=window.open(a.url,a.title,e);a.under&&c.opener.window.focus();return c},blank:function(a){return!a||!b("WitUnderscore")(a).size()},to_slug:function(a){return a.toLowerCase().split(" ").join("_").replace(/[^a-zA-Z0-9_]/,"")},pretty_date:function(a){if(!a)return;a=new Date(a);return a.toLocaleDateString()+" "+a.toLocaleTimeString()},chat_date:function(a){var b=new Date(),c=b.getFullYear()===a.getFullYear(),d=b.getMonth()===a.getMonth();b=b.getDate()===a.getDate();var e=a.toLocaleTimeString();if(c&&d&&b)return e;else return a.toLocaleDateString()+" "+e},human_date:function(a){__p&&__p();if(!a){!1;return}var b=new Date();b=b.getTime()-a.getTime();b=Math.round(b/1e3);if(b<60)return"a few seconds ago";b=Math.round(b/60);if(b<60)return b+" minutes ago";b=Math.round(b/60);if(b<24)return b+" hours ago";b=Math.round(b/24);if(b<31)return b+" days ago";b=Math.round(b/31);if(b<12)return b+" months ago";b=Math.round(b/12);return b+" years ago"},browser:function(){var a=navigator.userAgent.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];var b=a[1]||"";a=a[2]||"0";var c={};b&&(c[b]=!0,c.version=a);c.chrome?c.webkit=!0:c.webkit&&(c.safari=!0);c.supported=c.webkit||c.mozilla;return c},confirm:function(a,c,d){var e=h("<div>")[0];h("body").append(e);a={msg:a,onOk:c,onCancel:d,onHide:function(){b("ReactDOM").unmountComponentAtNode(e);return h(e).remove()}};return b("ReactDOM").render(b("React").createElement(m,a),e)},regex_escape:function(a){return a.trim().replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},uri_encode:function(a){return encodeURIComponent(a).replace(/[!\'()]/g,escape).replace(/\*/g,"%2A")},is_valid_email:function(a){return/[^@]+@[^\.]+\..+/.test(a)},easy_plural:function(a,b){Array.isArray(b)&&(b=b.length);if(b>1||b===0)return a+"s";else return a},intersperse:function(a,c){this.assert(function(){return b("WitUnderscore").isFunction(c)});var d=[];b("WitUnderscore").each(a,function(a){d.push(a);return d.push(c())});d.pop();return d},filterFalsy:function(a,b){var c=j(b);return a.filterNot(function(a,b){return c.has(b)&&!a})},safeCall:function(a){if(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return a.apply(this,c)}},safeParse:function(a){try{return JSON.parse(a)}catch(a){return null}},existy:function(a){return a!==null&&a!==undefined},isEmpty:function(a){return!a||(k.isIterable(a)?!a.count():!a.length)},identity:b("WitUnderscore").identity,WitLink:a,partial:b("WitUnderscore").partial,partialArgTracking:function(a){var b=a.__argtrack||i();for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];var f=this.partial.apply(this,[a].concat(d));f.__argtrack=b.concat(d);return f},throttle:b("WitUnderscore").throttle,debounce:b("WitUnderscore").debounce,isDate:b("WitUnderscore").isDate,isFunction:b("WitUnderscore").isFunction,isString:b("WitUnderscore").isString,isObject:b("WitUnderscore").isObject,escape:b("WitUnderscore").escape,str:function(a){return a||""},rand_nth:function(a){return a[Math.floor(Math.random()*a.length)]},degrees:"\xb0",emDash:"\u2014",enterKey:"\u23ce",macMeta:"\u2318",happyEmojis:["\ud83d\ude01","\ud83d\ude07","\ud83d\ude0a"],happyEmoji:function(){return this.rand_nth(this.happyEmojis)},thinkingEmoji:"\ud83e\udd14",scaredEmoji:"\ud83d\ude28",sadEmojis:["\ud83d\ude23","\ud83d\ude14","\u2639\ufe0f"],sadEmoji:function(){return this.rand_nth(this.sadEmojis)},prettyUUID:function(a){a=a.match(/([^-]+)$/);return a&&a[1]||""},editorText:function(a){return a.getCurrentContent().getPlainText()},isFocusAtEnd:function(a){var b=a.getSelection();a=a.getCurrentContent().getLastBlock();return a.getKey()===b.getAnchorKey()&&a.getLength()===b.getAnchorOffset()},nextChar:function(a){var b=a.getSelection(),c=b.getEndOffset();a=a.getCurrentContent().getBlockForKey(b.getEndKey());return a.getText().charAt(c)},filterStr:function(a,b){a=(a||"").toLowerCase().trim();b=(b||"").toLowerCase().trim();return b&&b!==a&&b.startsWith(a)},iterableOf:function(a){__p&&__p();var b=function(b,c,d){for(var e=arguments.length,f=new Array(e>3?e-3:0),g=3;g<e;g++)f[g-3]=arguments[g];var h=c[d];if(b&&!k.isIterable(h))throw new Error(d+" is not an iterable");var j=(h||i()).map(function(b,c){return a.apply(undefined,[[b],0].concat(f))}).find(function(a){return a instanceof Error});return j||null},c=b.bind(null,!1);c.isRequired=b.bind(null,!0);return c},memoize1:function(a,b){var c=[];return function(){var d=b?b.apply(undefined,arguments):arguments.length<=0?undefined:arguments[0];d!==c[0]&&(c=[d,a.apply(undefined,arguments)]);return c[1]}},truncate:function(a,b){a=a||"";if(a.length<=b)return a;else return a.substring(0,b)+"..."},shuffle:function(a){__p&&__p();a=Object.assign([],a);var c=a.length;while(0!==c){var d=Math.floor(b("Random").random()*c);c-=1;var e=a[c];a[c]=a[d];a[d]=e}return a},partition:function(a,b){var c=[],d=[];a.forEach(function(a){b(a)?c.push(a):d.push(a)});return[c,d]},pick:function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return c.reduce(function(b,c){Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b},{})},findWhere:function(a,b){return a.find(function(a){return Object.keys(b).every(function(c){return a[c]===b[c]})})},isValidValue:function(a){var b=typeof a==="string"&&a!=="";return typeof a==="number"||b}}}),null);
__d("WitNotify",["WitUnderscore","React","ReactDOM"],(function(a,b,c,d,e,f){__p&&__p();var g=window.$,h=7e3,i=10,j=function(a){return a.outerHeight(!0)},k=function(a,c,d){var e={key:"s",className:"notify-msg"};b("WitUnderscore").isArray(a)&&(a=a.map(function(a){return""+a}));return b("React").createElement("div",{className:"notify-box alert "+d},b("React").createElement("i",{className:c}),b("React").createElement("span",e,a))},l=function(a,c,d,e){var f=document.createElement("div");b("ReactDOM").render(k(a,c,d),f);a=f.innerHTML;return e(a)},m=function(a,b,c,d){return l(a,b,c,function(a){return d(g(a))})};a=function(a){__p&&__p();var b=function(){switch(a){case"success":return"fa fa-check-square";case"error":return"fa fa-warning";default:return"fa fa-info-circle"}}(),c=function(){switch(a){case"success":return"alert-success";case"error":return"alert-warning";default:return"alert-info"}}();c+=" notify-fixed";return function(a){return m(a,b,c,function(a){a.css({top:i});a.appendTo("body");i+=j(a);return setTimeout(function(){a.fadeOut(function(){i-=j(a),a.remove()})},h)})}};c=a("success");d=a("info");f=a("error");e.exports={success:c,info:d,error:f,make_box:m,make_box_html:l,make_box_react:k}}),null);
__d("WitModel",["Promise","WitActions","WitConfig","WitConstants","WitDynamicConfig","WitHelpers","WitLog","WitNotify","WitTaggedHelpers","formatDate","immutable"],(function(a,b,c,d,e,f){__p&&__p();var g=window.$,h=b("WitTaggedHelpers").createTaggedEditorState,i=b("immutable").OrderedMap,j=b("immutable").List;a=b("immutable").Record;var k=b("immutable").Set,l={},m=null;l.set_token=function(a){return m=a};var n=null;l.set_instance=function(a){return n=a};l.LOADING={};l.NOT_FOUND={};l.$ajax=function(a){b("WitHelpers").assert(function(){return b("WitHelpers").isObject(a)});var c={};m&&(c.Authorization="Bearer "+m);n&&(c["X-Wit-Instance"]=n);c.Accept="application/vnd.wit.20150405+json";a.headers=babelHelpers["extends"]({},a.headers,c);return g.ajax(a)};l.latestVersion=function(){return b("formatDate")(new Date(),"Y-m-d",{skipPatternLocalization:!0}).split("-").join("")};l.make_model=function(a,c){b("WitHelpers").blank(c)||Object.keys(c).forEach(function(b){a[b]=c[b]});return a};l.reindex=function(a){return l.$ajax({method:"GET",url:b("WitConfig").api_url("/train_search"),data:{lang:a}}).then(b("WitLog"))};l.train=function(){return l.$ajax({method:"GET",url:b("WitConfig").api_url("/train")}).then(b("WitLog"))};l["import"]=function(a,c,d){__p&&__p();return new(b("Promise"))(function(e,f){__p&&__p();var h=new XMLHttpRequest(),i=babelHelpers["extends"]({},c,{login:a});i=b("WitConfig").api_url("/import")+"?"+g.param(i);h.open("POST",i,!0);h.setRequestHeader("Authorization","Bearer "+m);h.onreadystatechange=function(){try{if(h.readyState!==4)return;h.status===200?e(JSON.parse(h.responseText)):(b("WitNotify").error(JSON.parse(h.responseText).error),f(h))}catch(a){b("WitLog").error("[import] error while importing",a),f(a)}};h.onerror=function(a){f(a)};h.send(d)})};l["export"]=function(a){return g.ajax({method:"GET",url:b("WitConfig").graph_api_url("/export"),headers:{Authorization:"Bearer "+a}})};l.getStatus=function(){return l.$ajax({type:"GET",url:""+b("WitConfig").graph_api_url("/system_status")})};l.getReliability=function(a){return l.$ajax({type:"GET",url:""+b("WitConfig").graph_api_url("/system_reliability"),data:{range:a}})};l.TextNode=a({text:"","ui-editorstate":h("")});l.SemanticNode=a({intent:null,entities:j()});l.WaveNode=a({wave:null,url:null});l.SampleImm=a({wave:new l.WaveNode(),text:new l.TextNode(),semantic:new l.SemanticNode(),"ui-confidence":null});function o(a,b){__p&&__p();switch(a){case"":return new l.SampleImm(b.filter(function(a){return a}));case"text":a=b.get("text")||"";var c=h(a);return new l.TextNode({text:a,"ui-editorstate":c});case"semantic":return new l.SemanticNode(b.filter(function(a){return a}));case"entities":case"subentities":return j(b.map(function(a){return new l.Entity(a)}));case"wave":return new l.WaveNode(b);default:return b}}l.sample={fromJS:function(a){return b("immutable").fromJS(a,o)},toBackend:function(a){return y(a.updateIn(["semantic","entities"],function(a){return a.map(l.entity.toBackend)}).update("semantic",y).update("text",y).update("wave",function(a){return a.wave?a:null}))},validSampleImm:function(a){var b=a.text;a=a.semantic;return!!(b.text.trim()&&a)},normalizeSamplesWithOldEntities:function(a){var b=function a(b){return b.map(function(b){var c=l.entity.normalize(b);b.subentities&&(c.subentities=a(b.subentities));return c})};a&&a.semantic&&a.semantic.entities&&(a.semantic.entities=b(a.semantic.entities));return a},hasWispUsingKey:function(a,b){return a.semantic.entities.some(function(a){return l.entity.key(a)===b})},hasWispValueUsingKey:function(a,b,c){return l.sample.hasWispUsingKey(a,b)&&a.semantic.entities.some(function(a){return a.value===c})},text:function(a){return a.text&&a.text.text||""},gen_key:function(a){var b=a.text;b=b&&b.text&&b.text.split(" ").join("");return(a.text&&a.text.id||b||"")+(a.semantic&&a.semantic.intent||"")+(a.wave&&a.wave.wave||"")},fetchForWisp:function(a){a=b("WitHelpers").pick(a,"wisp-id","start","rows","wisp-value");b("WitHelpers").assert(function(c){return b("WitHelpers").isString(a["wisp-id"])&&Number.isInteger(a.start)&&Number.isInteger(a.rows)});return l.$ajax({method:"GET",url:b("WitConfig").api_url("/wisp-expressions"),data:a}).then(function(a){a.hits&&(a=babelHelpers["extends"]({},a,{hits:a.hits.map(l.sample.fromJS)}));return a})},fetchRaw:function(a){return new(b("Promise"))(function(c,d){l.$ajax({url:b("WitConfig").migrated_api_url("/samples"),method:"GET",data:babelHelpers["extends"]({},a)}).then(function(a){b("WitLog")("[mdl/sample] GET /samples",a),c(a)})["catch"](function(a){b("WitLog")("[mdl/sample] Failed GET /samples",a),d(a)})})},normalizedSamplesMap:function(a,b,c){return a.reduce(function(a,c){var d=c.text;c=r(c.entities||[],l.wisps.nameToID(b));c=l.sample.fromJS({text:{text:d}}).setIn(["semantic","entities"],c);return a.set(d,c)},i())},search:function(a,c){__p&&__p();b("WitHelpers").assert(function(){return c instanceof l.Intent});var d=a.per_page||50,e=a.page||0;a.start=e*d;a.rows=d;a.verbose=!0;return l.$ajax({method:"GET",url:b("WitConfig").api_url("/expressions"),cache:a.cache,data:b("WitHelpers").pick(a,"validated?","dismissed?","intent","start","rows","presort")}).then(function(a){var c=(a.hits||[]).map(l.sample.fromJS);b("WitLog")("[mdl/expressions] searched "+c.length+"/"+a.num+" samples",c,a);return{num:a.num,hits:c,no_more:e*d+c.length===a.num,count_by_intent:a.count_by_intent}})}};l.eval=function(a,c,d,e){b("WitHelpers").assert(function(){return!b("WitHelpers").isFunction(c)});return new(b("Promise"))(function(f,g){a===""&&g("Tried to eval an empty string");var h={q:a,explain:!0,junk:!0};c&&(h.context=c);l.$ajax({url:b("WitConfig").migrated_api_url("/message"),method:"GET",data:babelHelpers["extends"]({},h,d)}).then(function(a){b("WitLog")("[mdl/eval] GET /message",a),e&&e(null,a),f(a)})["catch"](function(a){e&&e(a),g(a)})})};var p=function(a,b){return a.map(function(a){return b(a).update("subentities",function(a){return a&&a.map(b)})})},q=function a(c,d){__p&&__p();var e=[];Object.keys(c).forEach(function(f){(c[f]||[]).forEach(function(g){try{g=l.entity.normalize(g);var h=d.get(g.entity_name);h||b("WitLog").error("[wisp] could not find wisp",d,g);g.wisp=h;g.entities&&(g.subentities=a(g.entities,d));e.push(new l.Entity(g))}catch(a){b("WitLog").error("[wisp] could not parse entity",a,c[f])}})});return j(e)},r=function a(c,d){__p&&__p();c=c.map(function(c){try{var e=l.entity.normalize(c),f=d.get(e.entity_name);f||b("WitLog").error("[wisp] could not find wisp for sample",d,e);e.wisp=f;e.subentities=a(e.subentities||[],d);return new l.Entity(e)}catch(a){b("WitLog").error("[wisp] could not parse entity for sample",a,c);return null}});return j(c)};l.guessEntities=function(a,b){return l.eval(a,{},{explain:!1,verbose:!0,autosuggest:!0}).then(function(a){a=a.outcomes;a=a&&a[0]&&a[0].entities||{};return p(q(a,l.wisps.nameToID(b)),function(a){return a.set("ui-soft",!0)})})};l.eval_sample=function(a,b,c,d,e){return l.eval(a,b,e).then(function(b){b=b.outcomes;b.length===0&&(b=[{_text:a,confidence:0}]);var e=l.wisps.nameToID(d);return b.map(function(a){var b=a._text,d=a.intent,f=(c||[]).find(function(a){return a.name===d}),g=q(a.entities||{},e);return l.sample.fromJS({text:{text:b},semantic:{intent:f&&f.id},"ui-confidence":a.confidence}).setIn(["semantic","entities"],g)})})};l.Entity=a({wisp:null,value:null,unit:null,start:null,end:null,role:null,subentities:j(),body:null,resolved:null,autosuggest:null,"ui-soft":!1,confidence:null},"Entity");function s(a,b){switch(a){case"":return new l.Entity(b);case"subentities":return j(b.map(function(a){return new l.Entity(a)}));default:return b}}l.entity={fromJS:function(a){return b("immutable").fromJS(a,s)},key:function(a){return a.get("wisp")+(a.get("role")||"")},find_wisp:function(a,b){return a.find(function(a){return a.id===b||a.name===b})},isSpanless:function(a){return!Number.isFinite(a.get?a.get("start"):a.start)},normalizeName:function(a){return a.startsWith("wit$")?a.slice(4):a},normalize:function(a){var b={},c={},d=null;(a&&a.value&&a.value.type||a&&a.value&&a.value.normalized)&&(a=babelHelpers["extends"]({},a,a.value));Object.keys(a).forEach(function(e){var f=a[e];e==="_entity"||e==="entity"?b.entity_name=l.entity.normalizeName(f):e[0]==="_"?b[e.slice(1)]=f:e==="from"||e==="to"?(c[e]=f,d=d||{},d[e]=f.value,f.unit&&(d.unit=f.unit)):e==="value"?(c[e]=f,d=f):b[e]=f});b.infos=c;b.value=d;return b},toBackend:function(a){var c=function(a){return d(a)["delete"]("subentities")},d=function(a){return b("WitHelpers").filterFalsy(y(a).toMap()["delete"]("unit")["delete"]("autosuggest")["delete"]("confidence")["delete"]("resolved"),["body"])};return d(a.update("subentities",function(a){return a.map(c)}))},label:function(a,b){return a.get("role")||b.getIn([a.get("wisp"),"name"])}};var t="wit_nonewbie";l.user={normalize:function(a){if(!a)return null;a=Object.assign({},a);a.plan=a.plan||"community";return a},fetch_from_token:function(a){var c={};return new(b("Promise"))(function(d,e){l.$ajax({type:"PUT",url:b("WitConfig").api_url("/sync?verbose=true"),headers:{Authorization:"Bearer "+a},data:c}).then(function(a){a=l.user.normalize(a.user);b("WitActions").gotMe(a);d(a)})["catch"](e)})},fetch:function(a){b("WitHelpers").assert(function(){return a});b("WitHelpers").assert(function(){return b("WitHelpers").isString(m)});return new(b("Promise"))(function(c,d){l.$ajax({type:"GET",url:b("WitConfig").api_url("/users/"+encodeURIComponent(a)),dataType:"json"}).then(function(a){c(l.user.normalize(a))})["catch"](function(a,b,e){a.status===404?c(l.NOT_FOUND):d(b)})})},is_admin:function(a){b("WitHelpers").assert(function(){return a&&a.id});return Object.values(b("WitDynamicConfig").SUPERUSERS).map(function(a){return a.legacy_id}).includes(a.id)&&!localStorage.getItem("wit_no_admin")},find_instance:function(a,c){return b("WitHelpers").findWhere(a.instances,c)},is_creator:function(a,b){return b.username===a.login},is_owner:function(a,b){return!!a.instances.find(function(a){return a.id===b.id})},is_newbie:function(a){return!localStorage.getItem(t)},is_no_newbie_anymore:function(a){return localStorage.setItem(t,!0)},avatar_url:function(a,b){if(a.github_id)return"https://avatars.githubusercontent.com/u/"+a.github_id+"?s="+b;else return"https://graph.facebook.com/"+a.facebook_id+"/picture?height="+b}};l.Instance=function(a){__p&&__p();l.make_model(this,a);this.wisps&&(this.wisps=this.wisps.map(l.wisps.fromJS));this.intents&&(this.intents=this.intents.filter(function(a){return Object.keys(a).length}).map(function(a){return new l.Intent(a,this.wisps)}.bind(this)));this.labels&&(this.labels=this.labels.map(function(a){return new l.Label(a)}));this.samples&&(this.samples=this.samples.map(function(a){return new l.Sample(a)}));this.uuid&&(this.id=this.uuid);this.inbox_count=this.inbox_count||0;if(!this.id){a=new Error("No ID for instance",this);b("WitLog").error("[instance] missing ID for instance",a);throw a}return this};l.instance={timezones:function(a){return l.$ajax({type:"GET",url:b("WitConfig").api_url("/timezones")}).then(a)},appShow:function(a){return new(b("Promise"))(function(c,d){l.$ajax({method:"GET",url:b("WitConfig").graph_api_url("/apps/"+a)}).then(c,d)})},fetch:function(a){var c=a.user,d=a.instance;return new(b("Promise"))(function(a,e){c=encodeURIComponent(c),d=encodeURIComponent(d),l.$ajax({type:"GET",url:b("WitConfig").staging_api_url("inst/show","/inst/"+c+"/"+d)}).then(function(b){b=new l.Instance(b);a(b);return b},function(b,c,d){b.status===404?a(l.NOT_FOUND):e(c)})})},is_pristine:function(a){return!(a&&a.intents&&a.intents.find(function(a){return!l.intents.generated(a)}))},isLegacy:function(a){return!!(a&&a.intents)},nameBlacklist:k('" < > # % { } | \\ ^ ~ [ ] ` $ & + , / : ; = ? @'),isInvalidInstanceName:function(a){a=l.instance.nameBlacklist.intersect(a);if(!a.isEmpty())return a},exportURL:function(a){a=a.private_handle;return b("WitConfig").api_url("/export/"+a)}};l.Language=a({code:null,name:null,beta:!1},"Language");l.languages={fromJS:function(a){return new l.Language(a).update("beta",function(b){return b||a&&a.ui_beta})},fetch:function(){return l.$ajax({type:"GET",url:b("WitConfig").migrated_api_url("/languages")}).then(function(a){a=a.map(l.languages.fromJS);b("WitActions").gotLanguages({languages:a});return a})}};var u=function(a){var b=Object.assign({},a);b.user=a.user;b.wisps&&(b.wisps=b.wisps.map(l.wisps.fromJS));b.instance&&(b.instance=new l.Instance(a.instance));return b},v=function(a,c){b("WitHelpers").assert(function(){return a});["updated","deleted"].includes(a)&&(b("WitHelpers").assert(function(){return c.elem}),b("WitHelpers").assert(function(){return c.path}));return{data:c,type:a}},w=[];l.sync={flushQueue:function(){w=[]},queue_delta:function(a,b){w=w||[];w.push(v(a,b));return this},send:function(){__p&&__p();b("WitHelpers").assert(function(){return b("WitHelpers").isString(m)});var a=Object.assign([],w);w=[];var c=JSON.stringify(a),d=n;return new(b("Promise"))(function(a,e){__p&&__p();l.$ajax({method:"PUT",url:b("WitConfig").api_url("/sync?verbose=true"),contentType:"application/json",data:c}).then(function(c){__p&&__p();c=u(c);c.user&&b("WitActions").gotMe(Object.assign({},c.user));if(c.instance){var f=Object.assign({},c.instance);b("WitActions").gotInstance(f)}c.wisps&&b("WitActions").gotPartialWisps(d,c.wisps.map(l.wisps.fromJS));c&&c.infos&&c.infos.length&&c.infos.forEach(b("WitNotify").info);f=c&&c.errors&&c.errors[0];f?(b("WitNotify").error(f),b("WitLog").warn("[sync] error while syncing",f),e(f)):(b("WitLog")("[sync/send] resolving",c),a(c))})["catch"](function(a,c,d){for(var f=arguments.length,g=new Array(f>3?f-3:0),h=3;h<f;h++)g[h-3]=arguments[h];b("WitLog").warn("[sync] error while sending deltas",[a,c,d].concat(g));e("sync failed: "+d)})})}};l.event=function(a,c,d){c=c||{};b("WitLog")("[sync] event: "+a,c);c.sync&&l.sync.queue_delta(a,c.data);return new(b("Promise"))(function(a,e){c.sync=="now"&&l.sync.send().then(function(c){b("WitHelpers").isFunction(d)&&d(null,c),a(c)},function(a){b("WitHelpers").isFunction(d)&&d(a),e(a)})})};l.Intent=function(a){__p&&__p();l.make_model(this,a);if(!this.name){b("WitLog")(this);throw new Error("Intent needs name")}if(!this.id){b("WitLog")(this);throw new Error("Intent needs id")}this.wisps&&(this.wisps=this.wisps.map(l.wisps.fromJS));return this};Object.defineProperty(l.Intent.prototype,"states",{get:function(){return this.meta&&this.meta.states||[]},set:function(a){this.meta&&(this.meta.states=a)}});l.Intent.prototype.is_new=function(){return this["new"]};l.Intent.prototype.add_state=function(a){this.meta=this.meta||{};this.meta.states=this.meta.states||[];this.meta.states.push(a);return this};l.Intent.prototype.has_wisps=function(){return this.wisps&&this.wisps.length};l.Intent.prototype.rm_state=function(a){this.meta.states=this.meta.states.filter(function(b){return a!==b});return this};l.intents={generated:function(a){return a&&a.meta&&a.meta.generated}};l.WispValue=a({value:null,expressions:k(),metadata:null});l.WispExtraInfoSimilarWisp=a({name:""});l.WispExtraInfoExample=a({expression:null,response:null,spanless:!1});l.WispExtraInfo=a({long_desc:null,short_desc:null,examples:j(),similar_wisps:j()});l.Wisp=a({builtin:!1,doc:null,exotic:null,extra_info:null,id:null,lang:null,lookups:null,name:null,role:null,subs:j(),values:j(),"ui-temp":!1});var x=function(a,b){__p&&__p();switch(a){case"":return new l.Wisp(b);case"values":return j(b.map(function(a){return new l.WispValue(a).update("expressions",function(a){return a||k()})}));case"examples":return j(b.map(function(a){return new l.WispExtraInfoExample(a)}));case"expressions":return k(b);case"extra_info":return new l.WispExtraInfo(b);case"similar_wisps":return j(b.map(function(a){return new l.WispExtraInfoSimilarWisp(a)}));case"lookups":return k(b);default:return b}};l.wisps={nameToID:function(a){return a.valueSeq().map(function(a,b){return[a.name,a.id]}).fromEntrySeq().toMap()},isIntentWisp:function(a){return a.name==="intent"},fromJS:function(a){try{var c=JSON.parse(a.doc);a.extra_info=c;a.doc=c.long_desc}catch(a){}return b("immutable").fromJS(a,x)},pretty_name:function(a){__p&&__p();if(!a)return"";var b;a.builtin?b="wit/"+a.name:b=a.name;a.role&&(b=b+":"+a.role);if(a.subs&&a.subs.size){a=a.subs.map(l.wisps.pretty_name).join(", ");b=b+" ("+a+")"}return b},base_name:function(a){if(!a)return null;a=a.name;/:/.test(a)&&(a=a.split(":")[0]);return a},rolename:function(a){var b=a.name;a=a.role;return b+(a?":"+a:"")},wisp_public_id:function(a){var b=a.name;a=a.builtin;return a?"wit$"+b:b},wisp_public_id_with_role:function(a){var b=a.role;return l.wisps.wisp_public_id(a)+(b?":"+b:"")},fetch_latest:function(a,c){var d=[c.username,c.name],e=d[0],f=d[1],g=l.wisps.wisp_public_id(a);return new(b("Promise"))(function(a,d){l.$ajax({type:"GET",url:b("WitConfig").staging_api_url("inst/entities/show","/inst/"+e+"/"+f+"/entities/"+g)}).then(function(d){d=l.wisps.fromJS(d);b("WitActions").gotWisps(c.id,[d]);a(d)},d)})},fetch_insights:function(a,c){c=l.wisps.wisp_public_id(a);return l.$ajax({type:"GET",url:b("WitConfig").api_url("/entities/"+c+"/insights"),data:{metrics:"threshold_curves"}})},key:function(a){return a.id+(a.role||"")},compare:function(a,b){if(a.builtin&&!b.builtin||!a.builtin&&b.builtin)return a.builtin?1:-1;else return(a.name||"").localeCompare(b.name)},isTrait:function(a){a=a.get("lookups")||k();return a&&a.has(b("WitConstants").WISP_TRAIT)}};l.logs={normalize:function(a){return b("immutable").fromJS(a).update("events",function(a){return a.map(function(a){return a.get("context")?a:a.set("context",{})})}).toJS()},fetchBySessionAndThread:function(a){return l.$ajax({type:"GET",url:b("WitConfig").api_url("/thread"),data:a}).then(function(a){return l.logs.normalize(a)})},fetchByQuery:function(a){return l.$ajax({type:"GET",url:b("WitConfig").api_url("/threads"),data:a}).then(function(a){return j(a.map(l.logs.normalize)).toJS()})}};var y=function(a){return a.toKeyedSeq().filterNot(function(a,b){return b.startsWith("ui-")})};e.exports=l}),null);
__d("WitTaggedHelpers",["CompositeDraftDecorator","ContentState","EditorState","React","SelectionState","WitConstants","WitHelpers"],(function(a,b,c,d,e,f){__p&&__p();a=b("WitConstants").ENTITY_STYLE;c=b("WitConstants").SUGGESTED_ENTITY_STYLE;d=b("WitConstants").TEMP_ENTITY_STYLE;var g=(f={},f[d]=function(){return{className:"selection",style:{padding:"1px 1px",fontWeight:"bold"}}},f[c]=function(a,c){a={padding:"1px 1px",backgroundColor:b("WitHelpers").get_color(c[0],92),border:"1px dotted "+b("WitHelpers").get_color(c[0],30),borderRadius:"2px",opacity:.9,animation:"tagBackgroundFadeIn 1s"};return{style:babelHelpers["extends"]({},a)}},f[a]=function(a){var c=a[0];a=a[1];c={padding:"1px 1px",backgroundColor:b("WitHelpers").get_color(c),fontWeight:"bold"};a=a?{borderBottom:"3px solid "+b("WitHelpers").get_color(a,30)}:{};return{style:babelHelpers["extends"]({},c,a)}},f),h=function(a){var c=a.contentState,d=a.children,e=a.offsetKey;a=a.entityKey;c=c.getEntity(a).getData();a=c.style;var f=c.wispIds;c=c.suggWispIds;return b("React").createElement("span",babelHelpers["extends"]({"data-offset-key":e},g[a](f,c)),d)};d=function(a){a=b("ContentState").createFromText(a);var c=a.getBlockMap().first().getKey();return b("EditorState").create({currentContent:a,decorator:new(b("CompositeDraftDecorator"))([{strategy:i,component:h}]),selection:b("SelectionState").createEmpty(c),allowUndo:!1})};var i=function(a,b,c){a.findEntityRanges(function(a){a=a.getEntity();a=a&&c.getEntity(a);return a&&a.getType()==="TAG"},b)};e.exports={createTaggedEditorState:d,wispStrategy:i}}),null);
__d("GamesQuicksilverContextKey",["InstantGameContextType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=a.id,this.$2=a.size,this.$3=a.sourceID,this.$4=a.type}a.prototype.getID=function(){return this.$1};a.prototype.getSize=function(){return this.$2};a.prototype.getSourceID=function(){return this.$3};a.prototype.getType=function(){return this.$4};a.prototype.getTypeAPIValue=function(){switch(this.getType()){case b("InstantGameContextType").LINK:case b("InstantGameContextType").GROUP:return"group";case b("InstantGameContextType").STORY:return"post";case b("InstantGameContextType").THREAD:return"thread";case b("InstantGameContextType").SOLO:default:return"solo"}};a.prototype.getSDKContextInfo=function(){return{contextID:this.$1,contextSize:this.$2,contextType:this.getTypeAPIValue()}};a.prototype.isGroup=function(){return this.$4===b("InstantGameContextType").GROUP||this.$4===b("InstantGameContextType").LINK};a.prototype.isStory=function(){return this.$4===b("InstantGameContextType").STORY};a.prototype.isThread=function(){return this.$4===b("InstantGameContextType").THREAD};a.prototype.isSoloPlay=function(){return this.$4===b("InstantGameContextType").SOLO};e.exports=a}),null);
__d("XPagesBanUserDataController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/admin/ban_user/",{page_id:{type:"FBID",required:!0},user_ids:{type:"FBIDVector",required:!0}})}),null);
__d("XPagesUnbanUserDataController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/admin/unban_from_page/",{page_id:{type:"FBID",required:!0},user_ids:{type:"FBIDVector",required:!0}})}),null);